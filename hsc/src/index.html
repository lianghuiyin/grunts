<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="description" content="">
    <meta name="author" content="">

    <title></title>

    <!-- Bootstrap core CSS -->
    <link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- pickadate core CSS -->
    <link href="libs/pickadate/themes/default.css" rel="stylesheet">
    <link href="libs/pickadate/themes/default.date.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/starter-template.css?v=1.07" rel="stylesheet">

    <!--[if lt IE 9]><script src="libs/bootstrap/hacks/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="libs/bootstrap/hacks/html5shiv.js"></script>
      <script src="libs/bootstrap/hacks/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <script type='text/x-handlebars' id='components/spin-button'>
    {{#if isIcon}}
      {{#if isLoading}}
          <span {{bind-attr class=":glyphicon loadingIcon"}}></span>
      {{else}}
          <span {{bind-attr class=":glyphicon loadedIcon"}}></span>
      {{/if}}
      <span class="sr-only">{{title}}</span>
    {{else}}
      {{#if isLoading}}
        {{loadingText}}
      {{else}}
        {{title}}
      {{/if}}
    {{/if}}
    </script>
    <script type="text/x-handlebars" data-template-name="loading">
    Loading...
    </script>
    <script type="text/x-handlebars" data-template-name="startup">
    <div class = "startup">
      {{#each error in errors.server_side_error}}
        <div class="help-block text-danger">
          {{error.message}}
        </div>
      {{/each}}
      {{#if errors.length}}
        <div>
          <button {{action "retry"}} type="button" class="btn btn-primary">再试一次</button>
        </div>
      {{/if}}
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="application">
    <!-- Nav tabs -->
    <div class="navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand visible-xs-inline" href="index.html">试验场耐久试验信息系统</a>
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-left">
            <li class = "hidden-xs">
              <img src="images/logo_SVW.jpg" alt="上海大众汽车">            
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              {{#link-to "start" title = "主页"}}
                <span class="glyphicon glyphicon-home"></span>
                <label class = "sr-only">主页</label>
              {{/link-to}}
            </li>
            <li>
              {{#link-to "contact" title = "联系我们"}}
                <span class="glyphicon glyphicon-info-sign"></span>
                <label class = "sr-only">联系我们</label>
              {{/link-to}}
            </li>
            <li>
              {{#link-to "testtypestable" title = "试验类型面板展览"}}
                <span class="glyphicon glyphicon-list"></span>
                <label class = "sr-only">试验类型面板展览</label>
              {{/link-to}}
            </li>
            <li>
              {{#link-to "bedstandstable" title = "台架面板展览"}}
                <span class="glyphicon glyphicon-th-large"></span>
                <label class = "sr-only">台架面板展览</label>
              {{/link-to}}
            </li>
            <li>
              {{#link-to "picturesshow" title = "图片展览"}}
                <span class="glyphicon glyphicon-film"></span>
                <label class = "sr-only">图片展览</label>
              {{/link-to}}
            </li>
            {{#if controllers.session.isLogined}}
            <li class="log-in">
              {{#link-to "account" title = "设置" class = "hidden-xs"}}
                <span class="glyphicon glyphicon-cog"></span>
                <label class = "inline">{{controllers.session.user.name}}</label>
              {{/link-to}}
              {{#link-to "account" title = "设置" class = "visible-xs-block"}}
                <span class="glyphicon glyphicon-cog"></span>
                <label class = "inline">{{controllers.session.user.name}}</label>
              {{/link-to}}
            </li>
            <li class="log-in">
              <span class = "split hidden-xs"></span>
              <a href="javascript:void(0)" {{action "logout"}} title = "退出系统" class = "hidden-xs">
                <span class="glyphicon glyphicon-off"></span>
                <label class = "sr-only">退出系统</label>
              </a>
              <a href="javascript:void(0)" {{action "logout"}} title = "退出系统" class = "visible-xs-block">
                <span class="glyphicon glyphicon-off"></span>
                <label class = "sr-only">退出系统</label>
              </a>
            </li>
            {{else}}
            <li class="log-out">
              {{#link-to "login" title = "登录"}}
                <span class="glyphicon glyphicon-user"></span>
                <label class = "sr-only">登录</label>
              {{/link-to}}
            </li>
            {{/if}}
          </ul>
        </div>
      </div>
    </div>
    <!-- Tab panes -->
    <div class="middler tab-content">
      {{outlet}}
    </div>
    <div class="footer navbar-inverse navbar-fixed-bottom text-center">
      <span><a {{bind-attr href=authorSite}} target = "_blank">{{author}}</a></span>
      <span class = "hidden-xs">·</span>
      <span class = "hidden-xs">{{copyright}}</span>
      <span class = "hidden-xs">·</span>
      <span class = "hidden-xs">{{version}}</span>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name='_appinfo'>
      <h1>
        {{controllers.application.appTitle}}<br/>
        <small>{{controllers.application.appName}}</small>
      </h1>
    </script>
    <script type="text/x-handlebars" data-template-name="login">
      <div class="navigable-container" id="login">
        <div class="container">
          <div class="row">
            <div class="jumbotron">
              <div class="col-md-8 col-sm-12 hidden-xs hidden-sm app-title-box">
                {{partial "_appinfo"}}
              </div>
              <div class="col-md-4 col-sm-12">
                <div class="well">
                  <div class="form-signin" role="form">
                    <h2 class="form-signin-heading">登录</h2>
                    <div class="form-group">
                      <label for="log_name" class = "sr-only">用户</label>
                      {{input id = "log_name" type="text" class="form-control" placeholder="手机号或邮箱" value=model.log_name}}
                    </div>
                    <div {{bind-attr class=":form-group errors.messages.length:has-error errors.messages.length:has-feedback"}}>
                      <div class="input-group">
                        <label for="log_password" class = "sr-only">密码</label>
                        {{input id = "log_password" type="password" action = "go" class="form-control" placeholder="密码" value=model.log_password}}
                        {{#if model.errors.messages.length}}
                          <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                        {{/if}}
                        {{#if model.log_password}}
                          {{spin-button isLoading=isSaving disabled=isUnSavable isIcon=true action="go" class="input-group-addin addin-large pull-right" title = "登录"}}
                        {{/if}}
                      </div>
                      {{#each error in model.errors.server_side_error}}
                        <div class="help-block text-danger">
                          {{error.message}}
                        </div>
                      {{/each}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </script>
    <script type="text/x-handlebars" data-template-name="start">
    <div class="start-index navigable-pane">
      <div class="container">
        <div class="jumbotron">
          <div class="row">
            <div class="col-md-8 col-sm-12 hidden-xs hidden-sm app-title-box">
              {{partial "_appinfo"}}
            </div>
            <div class="col-md-4 col-sm-12">
              <div class="well">
                  <a {{action "goInstances"}} href="javascript:void(0)" class = "list-group-item">
                    我的工作台
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  <a {{action "goCartraces"}} href="javascript:void(0)" class = "list-group-item">
                    车辆履历
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  <a {{action "goBedstandtraces"}} href="javascript:void(0)" class = "list-group-item">
                    台架履历
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  {{#if controllers.session.isCarOwners}}
                  <a {{action "goCars"}} href="javascript:void(0)" class = "list-group-item">
                    车辆管理
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  {{/if}}
                  {{#if controllers.session.isBedstandsManager}}
                  <a {{action "goBedstands"}} href="javascript:void(0)" class = "list-group-item">
                    台架管理
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  {{/if}}
                  {{#if controllers.session.user.isAdmin}}
                  <a {{action "goSetting"}} href="javascript:void(0)" class = "list-group-item">
                    系统设置 
                    <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  {{/if}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{outlet}}
    {{outlet "instances"}}
    {{outlet "instances_bedstands"}}
    {{outlet "instances_bedstands_newinstance"}}
    {{outlet "instance"}}
    {{outlet "setting"}}
    {{outlet "roles"}}
    {{outlet "role"}}
    {{outlet "organizations"}}
    {{outlet "organization"}}
    {{outlet "users"}}
    {{outlet "user"}}
    {{outlet "cars"}}
    {{outlet "car"}}
    {{outlet "instances_cars"}}
    {{outlet "workshops"}}
    {{outlet "workshop"}}
    {{outlet "vehicletypes"}}
    {{outlet "vehicletype"}}
    {{outlet "testtypes"}}
    {{outlet "testtype"}}
    {{outlet "bedstands"}}
    {{outlet "bedstand"}}
    {{outlet "flows"}}
    {{outlet "flow"}}
    {{outlet "flowversion"}}
    {{outlet "exhibitions"}}
    </script>
    <script type="text/x-handlebars" data-template-name="start/instances">
    <div class="container-fluid">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">我的工作台</h3>
            <div class="btn-group pull-right">
              <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown">
                <span class="glyphicon glyphicon-plus"></span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a {{action "goNewBedstandInstance"}} href = "javascript:void(0)">新建台架工作单</a></li>
                <li><a {{action "goCars"}} href = "javascript:void(0)">新建车辆工作单</a></li>
              </ul>
            </div>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left input-addin-right" placeholder=searchHelp value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <span class="help-block">
              请选择一个工作单。
            </span>
          </div>
          <div class = "help-split"></div>
          <div class = "container-fluid">
            <div class = "row">
              <div class="col-md-4 col-sm-12">
                <!-- List group -->
                <div class="list-group">
                  <a {{bind-attr class=":list-group-item isInboxSelected:active"}} {{action "goInbox"}} href = "javascript:void(0)">
                    待处理<span class="glyphicon glyphicon-chevron-right pull-right"></span>
                    <span class="badge pull-right">{{controllers.session.inboxs.length}}</span>
                  </a>
                  <a {{bind-attr class=":list-group-item isOutboxSelected:active"}} {{action "goOutbox"}} href = "javascript:void(0)">
                    已处理<span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                  <a {{bind-attr class=":list-group-item isMonitorSelected:active"}} {{action "goMonitor"}} href = "javascript:void(0)">
                    监控箱<span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  </a>
                </div>
              </div>
              <div class="col-md-8 col-sm-12">
                <!-- List group -->
                <div class="list-group">
                  {{#each instance in arrangedResult}}
                  <a class="list-group-item" {{action "goInstance" instance.id}} href = "javascript:void(0)">
                    <div class = "row">
                      <div class="col-md-5 col-sm-12">
                        {{#if instance.is_bedstand}}
                          <span class = "mr4">{{instance.bedstand.name}}</span>{{bedstand_running_state_text instance.bedstand.running_state}}
                          {{#if instance.vehicletype}}
                            <span class = "hidden-xs"> - {{instance.vehicletype.name}}</span>
                          {{/if}}
                        {{else}}
                          {{instance.car.number}}【{{instance.car.testtype.name}}】<span class = "hidden-xs">- {{instance.car.vehicletype.name}}</span>
                        {{/if}}
                      </div>
                      <div class="col-md-4 col-sm-12">
                        {{#if instance.previous_trace_step}}
                          {{step_type instance.previous_trace_step.type false}}<span class = "ml4">{{instance.previous_trace_step.name}}</span>
                        {{/if}}
                        {{step_type instance.lastTrace.step.type false}}<span {{bind-attr class=":ml4 instance.flowversion.is_current::text-warning"}} class = "ml4">{{instance.lastTrace.step.name}}</span>
                      </div>
                      <div class="col-md-3 col-sm-12">
                        <span class="pull-right">
                          {{timefmt instance.lastTrace.start_date}}
                        </span>
                      </div>
                    </div>
                  </a>
                  {{/each}}
                  {{#if isTopButtonNeeded}}
                    <button {{action "toggleToShowAll"}} type="button" class="btn btn-default btn-xs btn-block">
                      <span {{bind-attr class=":glyphicon isToShowAll:glyphicon-chevron-up:glyphicon-chevron-down"}}></span>
                    </button>
                  {{/if}}
                </div>
                {{outlet}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="inbox/instance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary hidden-print" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
            <a href = "print.html" target = "_blank" class="pull-right btn-primary btn-sm hidden-print hidden-xs" title = "打印">
              <span class="glyphicon glyphicon-print" aria-hidden="true"></span>
              <span class = "sr-only">打印</span>
            </a>
          </div>
          <div class="panel-body">
            <span class="help-block hidden-print">
              {{helpInfo}}
            </span>
            {{#unless flowversion.is_current}}
              <div class = "help-block text-warning">该工作单的流程版本已升级，请点击底部的升级按钮来升级该工作单对应的流程版本。
              </div>
            {{/unless}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            {{#unless is_bedstand}}
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="number">车辆编号</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{trace.car.number}}</p>
                </div>
              </li>
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="testtype">试验类型</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{trace.car.testtype.name}}</p>
                </div>
              </li>
            {{/unless}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.bedstand.length:has-error"}}>
              <label class="control-label col-md-2" for="bedstand">台架</label>
              <div class="col-md-8 col-sm-12">
                {{#if is_bedstand}}
                  <p class="form-control-static">{{bedstand.name}}</p>
                {{else}}
                  {{#if isFormEditable}}
                    {{view "select" id = "bedstand" class="form-control"
                      content=bedstands
                      optionLabelPath="content.name"
                      optionValuePath="content.id"
                      prompt="--请选择一个台架--"
                      selection=selectedBedstand
                    }}
                    {{#if errors.bedstand}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                    {{#each error in errors.bedstand}}
                      <div class="help-block text-danger">
                        {{error.message}}
                      </div>
                    {{/each}}
                  {{else}}
                    <p class="form-control-static">{{bedstand.name}}</p>
                  {{/if}}
                {{/if}}
              </div>
            </li>
            {{!-- <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="running_state">台架运行状态</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand_running_state_text bedstand.running_state}}</p>
              </div>
            </li> --}}
            {{#unless isFormNone}}
            {{#if is_bedstand}}
              <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.vehicletype.length:has-error"}}>
                <label class="control-label col-md-2" for="vehicletype">车型</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isFormEditable}}
                    {{view "select" id = "vehicletype" class="form-control"
                      content=vehicletypes
                      optionLabelPath="content.name"
                      optionValuePath="content.id"
                      prompt="--请选择一个台架--"
                      selection=selectedVehicletype
                    }}
                    {{#if errors.vehicletype}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                    {{#each error in errors.vehicletype}}
                      <div class="help-block text-danger">
                        {{error.message}}
                      </div>
                    {{/each}}
                  {{else}}
                    <p class="form-control-static">{{vehicletype.name}}</p>
                  {{/if}}
                </div>
              </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isFormEditable}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{/unless}}
            {{#if trace.previous_trace}}
            {{#with trace.previous_trace as previous_trace}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.step.name}}<span>{{step_type previous_trace.step.type false}}</span></p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤处理人</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.handler.name}}</p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤处理信息</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.info}}</p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            {{/with}}
            {{/if}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">当前步骤</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{trace.step.name}}<span>{{step_type trace.step.type false}}</span></p>
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="handler_org_type">处理组织类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_org_type trace.step.handler_org_type}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="handler_type">处理人类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_type trace.step.handler_type}}</p>
              </div>
            </li>
            {{/if}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="organization">关联组织</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{trace.organization.name}}</p>
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="current_is_handler_locked">是否锁定处理人</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean current_is_handler_locked}}</p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.current_handler.length:has-error"}}>
              <label class="control-label col-md-2" for="current_handler">处理人</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "current_handler" class="form-control"
                  content=handlers
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  selection=selectedHandler
                }}
                {{#if errors.current_handler}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.current_handler}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="start_date">开始时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt trace.start_date}}</p>
              </div>
            </li>
            {{#if trace.yellow_due}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="yellow_due">黄色超时时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt trace.yellow_due}}</p>
              </div>
            </li>
            {{/if}}
            {{#if trace.yellow_due}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="red_due">红色超时时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt trace.red_due}}</p>
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="color">默认颜色</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{color trace.step.color}}</p>
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_step_type">流转方式</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_next_step_type trace.step.next_step_type}}</p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_step.length:has-error"}}>
              <label class="control-label col-md-2" for="next_step">下一步骤</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  {{view "select" id = "next_step" class="form-control hidden-print"
                    content=nextSteps
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个步骤--"
                    selection=selectedNextStep
                  }}
                  <p class="form-control-static visible-print-block print-value">{{selectedNextStep.name}}</p>
                  {{#if next_step.description}}
                    <div class = "help-block hidden-print">{{next_step.description}}</div>
                  {{/if}}
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
                {{#if errors.next_step}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_step}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_org_type">下一步骤处理组织类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_org_type next_handler_org_type}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_type">下一步骤处理人类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_type next_handler_type}}</p>
              </div>
            </li>
            {{/if}}
            {{#unless next_step.isEnd}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_organization">下一步骤组织</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_organization.name}}</p>
              </div>
            </li>
            {{/unless}}
            {{#if isNeedNextUserSelection}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_user.length:has-error"}}>
              <label class="control-label col-md-2" for="next_user">下一步骤处理人</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "next_user" class="form-control hidden-print"
                  content=nextUsers
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  prompt="--请选择一个用户--"
                  selection=selectedNextUser
                }}
                <p class="form-control-static visible-print-block print-value">{{selectedNextUser.name}}</p>
                {{#if isNextUsersEmpty}}
                <div class = "help-block text-warning">检测到{{next_organization.name}}中还没有任何用户，请联系系统管理员至少添加一个用户。</div>
                {{/if}}
                {{#if errors.next_user}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_user}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_is_handler_locked">下一步骤是否锁定处理人</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean next_step.is_handler_locked}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_yellow_timeout">下一步骤黄色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_yellow_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_red_timeout">下一步骤红色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_red_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_color">下一步骤默认颜色</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{color next_color}}</p>
              </div>
            </li>
            {{/if}}
            {{#if isNeedToInputTimeout}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_yellow_due.length:has-error"}}>
              <label class="control-label col-md-2" for="next_yellow_due">下一步骤黄色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <div class="input-group">
                  {{input id = "next_yellow_due" type="text" class="form-control pull-left" value=nextYellowTimeout}}
                  <span class = "input-group-addon">{{controllers.application.timeoutTag}}</span>
                  <div class="input-group-btn">
                    <button type="button" {{action "toggleIsNextSkipWeekend"}} class="btn btn-default" aria-label="Italic">
                      <span {{bind-attr class=":glyphicon :mr4 :text-warning isNextSkipWeekend:glyphicon-check:glyphicon-unchecked"}}></span>跳过周末
                    </button>
                  </div>
                  <span class="input-group-addon">预计将结束于：{{timefmt next_yellow_due}}</span>
                  {{#if errors.next_yellow_due}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                </div>
                {{#each error in errors.next_yellow_due}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_red_due.length:has-error"}}>
              <label class="control-label col-md-2" for="next_red_due">下一步骤红色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <div class="input-group">
                  {{input id = "next_red_due" disabled="disabled" type="text" class="form-control pull-left" value=nextRedTimeout}}
                  <span class = "input-group-addon">{{controllers.application.timeoutTag}}</span>
                  <div class="input-group-btn">
                    <button type="button" {{action "toggleIsNextSkipWeekend"}} class="btn btn-default" aria-label="Italic">
                      <span {{bind-attr class=":glyphicon :mr4 :text-danger isNextSkipWeekend:glyphicon-check:glyphicon-unchecked"}}></span>跳过周末
                    </button>
                  </div>
                  <span class="input-group-addon">预计将结束于：{{timefmt next_red_due}}</span>
                  {{#if errors.next_red_due}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                </div>
                {{#each error in errors.next_red_due}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.current_info.length:has-error"}}>
              <label class="control-label col-md-2" for="current_info">处理信息</label>
              <div class="col-md-8 col-sm-12">
                {{textarea id = "current_info" type="text" rows = "4" class="form-control hidden-print" value=current_info placeholder = "请输入当前步骤处理信息"}}
                <p class="form-control-static visible-print-block print-value">{{current_info}}</p>
                {{#if errors.current_info}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.current_info}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
                <div class = "help-block text-muted">
                  {{currentInfoHelpInfo}}
                </div>
              </div>
            </li>
            {{#if instance.is_started}}
            <li class="list-group-item form-group has-feedback hidden-print">
              <label class="control-label col-md-2" for="next_step_type">流转历程</label>
              <div class="col-md-8 col-sm-12">
                {{render "traces" traces}}
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer hidden-print">
            {{#if errors.messages}}
              {{#each error in errors.server_side_error}}
              <div class="help-block text-center text-danger">
                {{error.message}}
              </div>
              {{/each}}
            {{/if}}
            {{#if flowversion.is_current}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="send" class="btn btn-info btn-block" title="发送"}}
            {{else}}
              <div class = "text-warning text-center">该工作单的流程版本已升级，请点击升级按钮来升级该工作单对应的流程版本
              </div>
              {{#if isStepRemovedAfterUpgrade}}
                <div class = "text-info text-center">
                  由于新流程版本中已把当前步骤移除，所以升级后该工作单将发送到新版本的开始步骤“{{instance.flow.current.startStep.name}}”
                </div>
              {{else}}
                <div class = "text-info text-center">
                  升级后该工作单将保留在当前步骤“{{trace.step.name}}”
                </div>
              {{/if}}
              {{spin-button isLoading=isUpgrading disabled=isUpgrading action="upgrade" class="btn btn-info btn-block" title="升级"}}
            {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="outbox/instance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary hidden-print" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
            <a href = "print.html" target = "_blank" class="pull-right btn-primary btn-sm hidden-print hidden-xs" title = "打印">
              <span class="glyphicon glyphicon-print" aria-hidden="true"></span>
              <span class = "sr-only">打印</span>
            </a>
          </div>
          <div class="panel-body">
            <span class="help-block hidden-print">
              {{helpInfo}}
            </span>
            {{#unless flowversion.is_current}}
              <div class = "help-block text-warning">该工作单的流程版本已升级，流转到下一步骤后该工作单对应的流程版本将自动升级。
              </div>
            {{/unless}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            {{#unless is_bedstand}}
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="number">车辆编号</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{lastTrace.car.number}}</p>
                </div>
              </li>
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="testtype">试验类型</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{lastTrace.car.testtype.name}}</p>
                </div>
              </li>
            {{/unless}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="bedstand">台架</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand.name}}</p>
              </div>
            </li>
            {{!-- <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="running_state">台架运行状态</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand_running_state_text bedstand.running_state}}</p>
              </div>
            </li> --}}
            {{#if is_bedstand}}
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="vehicletype">车型</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{lastTrace.vehicletype.name}}</p>
                </div>
              </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{description}}</p>
              </div>
            </li>
            {{#if lastTrace.previous_trace}}
            {{#with lastTrace.previous_trace as previous_trace}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.step.name}}<span>{{step_type previous_trace.step.type false}}</span></p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤处理人</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.handler.name}}</p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">上一步骤处理信息</label>
              <div class="col-md-8 col-sm-12">
                {{#if isPrevTraceLoaded}}
                  <p class="form-control-static">{{previous_trace.info}}</p>
                {{else}}
                  <p class="form-control-static"><span class = "glyphicon glyphicon-transfer"></span></p>
                {{/if}}
              </div>
            </li>
            {{/with}}
            {{/if}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="testtype">当前步骤</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{lastTrace.step.name}}<span>{{step_type lastTrace.step.type false}}</span></p>
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="handler_org_type">处理组织类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_org_type lastTrace.step.handler_org_type}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="handler_type">处理人类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_type lastTrace.step.handler_type}}</p>
              </div>
            </li>
            {{/if}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="organization">关联组织</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{lastTrace.organization.name}}</p>
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="is_handler_locked">是否锁定处理人</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean lastTrace.step.is_handler_locked}}</p>
              </div>
            </li>
            {{/if}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="start_date">开始时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt lastTrace.start_date}}</p>
              </div>
            </li>
            {{#if lastTrace.yellow_due}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="yellow_due">黄色超时时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt lastTrace.yellow_due}}</p>
              </div>
            </li>
            {{/if}}
            {{#if lastTrace.yellow_due}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="red_due">红色超时时间</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{timefmt lastTrace.red_due}}</p>
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="color">默认颜色</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{color lastTrace.step.color}}</p>
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_step_type">流转方式</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_next_step_type lastTrace.step.next_step_type}}</p>
              </div>
            </li>
            {{/if}}
            <li class="list-group-item form-group has-feedback hidden-print">
              <label class="control-label col-md-2" for="next_step_type">流转历程</label>
              <div class="col-md-8 col-sm-12">
                {{render "traces" traces}}
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="traces">
    <ul class="list-history">
      {{#each trace in sortedTracesDesc}}
      <li class="list-history-item">
          <div class = "history-icon">
            <span {{bind-attr class=":glyphicon trace.is_finished:glyphicon-ok-sign:glyphicon-record trace.is_finished::t5 trace.realTimeoutColor"}}></span>
          </div>
          {{#if trace.previous_trace}}
            {{history_line trace.realTimeoutColor isFinished = trace.is_finished}}
          {{/if}}
          <div class="history-title">
            <span {{bind-attr class="trace.realTimeoutColor"}}>
              {{trace.step.name}}
            </span>
            <span>
              {{step_type trace.step.type false}}
            </span>
          </div>
          <div class = "history-content text-muted">
            <span class = "history-organization">{{trace.organization.name}}</span>
            <span class = "history-handler">{{trace.handler.name}}</span>
            {{#unless trace.handler}}
            <span class = "history-user">{{trace.user.name}}</span>
            {{/unless}}
            <span class = "history-date pull-right hidden-xs">{{timefmt trace.start_date}}</span>
            <div class = "history-date visible-xs-block">{{timefmt trace.start_date}}</div>
          </div>
          {{#if trace.info}}
          <div class = "history-info text-muted">
            <span class = "">{{trace.info}}</span>
          </div>
          {{/if}}
      </li>
      {{/each}}
    </ul>
    {{#if isLoadingTop}}
      <span class = "glyphicon glyphicon-transfer"></span>
    {{else}}
      {{#if isTopButtonNeeded}}
        <button {{action "toggleToShowAll"}} type="button" class="btn btn-default btn-xs btn-block">
          <span {{bind-attr class=":glyphicon isToShowAll:glyphicon-chevron-up:glyphicon-chevron-down"}}></span>
        </button>
      {{/if}}
      {{#unless isFirstTraceLoaded}}
        {{spin-button isIcon=true loadedIcon='glyphicon-chevron-down' isLoading=isLoadingMore disabled=isLoadingMore action="loadMoreTraces" class="btn btn-info btn-xs btn-block"}}
      {{/unless}}
    {{/if}}
    </script>
    <script type="text/x-handlebars" data-template-name="start/setting">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">系统设置</h3>
          </div>
          <!-- List group -->
          <div class="list-group">
            <a class="list-group-item" {{action "goRoles"}} href = "javascript:void(0)">
              角色管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            <a class="list-group-item" {{action "goOrganizations"}} href = "javascript:void(0)">
              组织管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            <a class = "list-group-item" {{action "goUsers"}} href="javascript:void(0)">
              用户管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            <a class="list-group-item" {{action "goVehicletypes"}} href = "javascript:void(0)">
              车型管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            <a class="list-group-item" {{action "goTesttypes"}} href = "javascript:void(0)">
              试验类型管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            <a class="list-group-item" {{action "goFlows"}} href = "javascript:void(0)">
              流程管理
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="roles">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">角色管理</h3>
            <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
              <span class="glyphicon glyphicon-plus"></span>
            </a>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left" placeholder="输入角色名称搜索" value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="container">
            <span class="help-block">
              请选择一个角色。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each role in arrangedResult itemController="role"}}
            <a class="list-group-item" {{action "goRole" role.id}} href = "javascript:void(0)">
              {{role.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="role">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{name}}</p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.role.length:has-error"}}>
              <label class="control-label col-md-2" for="power">角色权限</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <p class="form-control-static">{{power}}敬请期待。。。</p>
                  <span class="glyphicon form-control-feedback"></span>
                {{else}}
                  <p class="form-control-static">{{power}}敬请期待。。。</p>
                {{/if}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{spin-button isLoading=isSaving disabled=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="organizations">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">组织管理</h3>
            <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
              <span class="glyphicon glyphicon-plus"></span>
            </a>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left" placeholder="输入组织名称搜索" value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="container">
            <span class="help-block">
              请选择一个组织。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each organization in arrangedResult itemController="organization"}}
            <a class="list-group-item" {{action "goOrganization" organization.id}} href = "javascript:void(0)">
              {{organization.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="organization">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback model.errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=model.name}}
                  {{#if model.errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{model.name}}</p>
                {{/if}}
                {{#each error in model.errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="is_car_owners">是否车辆负责组</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <div class="btn-group form-control" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm model.is_car_owners:active"}} {{action "setIsCarOwners" true}}>
                      <input type="radio" name="is_car_owners" /> 是
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm model.is_car_owners::active"}} {{action "setIsCarOwners" false}}>
                      <input type="radio" name="is_car_owners" /> 否
                    </label>
                  </div>
                {{else}}
                  <p class="form-control-static">{{boolean model.is_car_owners}}</p>
                {{/if}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="is_bedstand_owners">是否台架负责组</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <div class="btn-group form-control" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm model.is_bedstand_owners:active"}} {{action "setIsBedstandOwners" true}}>
                      <input type="radio" name="is_bedstand_owners" /> 是
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm model.is_bedstand_owners::active"}} {{action "setIsBedstandOwners" false}}>
                      <input type="radio" name="is_bedstand_owners" /> 否
                    </label>
                  </div>
                {{else}}
                  <p class="form-control-static">{{boolean model.is_bedstand_owners}}</p>
                {{/if}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback model.errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=model.description}}
                  {{#if model.errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{model.description}}</p>
                {{/if}}
                {{#each error in model.errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{model.createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt model.created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{model.modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt model.modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if model.errors.messages}}
                {{#each error in model.errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=model.isSaving disabled=model.isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{spin-button isLoading=model.isSaving disabled=model.isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="users">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">用户管理</h3>
            <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
              <span class="glyphicon glyphicon-plus"></span>
            </a>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left" placeholder="输入用户姓名、手机号、邮箱或所属组织名称搜索" value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="container">
            <span class="help-block">
              请选择一个用户。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each user in arrangedResult itemController="user"}}
            <a class="list-group-item" {{action "goUser" user.id}} href = "javascript:void(0)">
              <span class="ws w50per">{{user.name}}</span>
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
              <span class="pull-right ws w40per text-right">{{organizations_name user.organizations}}</span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="user">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">姓名</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{name}}</p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.phone.length:has-error"}}>
              <label class="control-label col-md-2" for="phone">手机号</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "phone" type="text" class="form-control" value=phone}}
                  {{#if errors.phone}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{phone}}</p>
                {{/if}}
                {{#each error in errors.phone}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.email.length:has-error"}}>
              <label class="control-label col-md-2" for="email">邮箱</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "email" type="text" class="form-control" value=email}}
                  {{#if errors.email}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{email}}</p>
                {{/if}}
                {{#each error in errors.email}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.role.length:has-error"}}>
              <label class="control-label col-md-2" for="role">所属角色</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "role" class="form-control"
                    content=roles
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个角色--"
                    selection=selectedRole
                  }}
                  {{#if errors.role}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{role.name}}</p>
                {{/if}}
                {{#each error in errors.role}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.organizations.length:has-error"}}>
              <label class="control-label col-md-2" for="organizations">所属组织</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <div class="form-control">
                    <a data-toggle="collapse" href="#collapseOrganizationsFilter" aria-expanded="false" aria-controls="collapseOrganizationsFilter" class="btn btn-block btn-default btn-organizations">
                      {{organizations_name organizations}}<span {{bind-attr class=":pull-right :glyphicon :glyphicon-filter"}}></span>
                    </a>
                  </div>
                  <div class="collapse filter-list well well-sm" id="collapseOrganizationsFilter" aria-expanded="false">
                    <div class="btn-group btn-group-vertical" data-toggle="buttons">
                      <label {{bind-attr class=":btn :btn-default isFilterAuto:active"}} {{action "clearAllOrganizations"}}>
                        <input type="radio" name="filterTypes"> 全部清除<span class = "glyphicon glyphicon-ban-circle pull-right text-danger"></span>
                      </label>
                      {{#each item in allOrganizations itemController="user_organizations_item"}}
                        <label {{bind-attr class=":btn :btn-default isFilterAuto:active"}} {{action "checkOrganizationItem" item}}>
                          <input type="radio" name="filterTypes">{{item.name}}
                          {{#if item.isChecked}}
                            <span class="pull-right glyphicon glyphicon-ok"></span>
                          {{/if}}
                        </label>
                      {{/each}}
                    </div>
                  </div>
                  {{#if errors.organizations}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{organizations_name organizations}}</p>
                {{/if}}
                {{#each error in errors.organizations}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.signature.length:has-error"}}>
              <label class="control-label col-md-2" for="signature">个性签名</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "signature" type="text" rows = "4" class="form-control" value=signature}}
                  {{#if errors.signature}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{signature}}</p>
                {{/if}}
                {{#each error in errors.signature}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=model.isSaving disabled=model.isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                <button {{action "resetpwd"}} type="button" class="btn btn-info btn-block" >重置密码</button>
                {{spin-button isLoading=isSaving disabled=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="user/resetpwd">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.new_password.length:has-error"}}>
              <label class="control-label col-md-2" for="new_password">将密码重置为</label>
              <div class="col-md-8 col-sm-12">
                {{input id = "new_password" type="text" class="form-control" value=new_password}}
                {{#if errors.new_password}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.new_password}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="start/cars">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>

            {{#if isNewButtonNeeded}}
              <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
                <span class="glyphicon glyphicon-plus"></span>
              </a>
            {{/if}}
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left input-addin-right" placeholder=searchHelp title=searchHelp value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                  <a data-toggle="collapse" href="#collapseCarFilter" aria-expanded="false" aria-controls="collapseCarFilter" class="input-group-addin addin-round pull-right">
                    <span class = "hidden-xs">{{car_status filterType}}</span><span {{bind-attr class=":glyphicon isLoadingTop:glyphicon-transfer:glyphicon-filter isFilterAuto::text-warning"}}></span>
                  </a>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="collapse filter-list well well-sm" id="collapseCarFilter" aria-expanded="false">
                  <div class="btn-group btn-group-vertical" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-default isFilterAuto:active"}} {{action "setFilterType" "auto"}}>
                      <input type="radio" name="filterTypes"> 自动<span class = "hidden-xs pull-right text-muted">从本地筛选所有车辆</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterUnused:active"}} {{action "setFilterType" "unused"}}>
                      <input type="radio" name="filterTypes"> 闲置<span class = "hidden-xs pull-right text-muted">从本地筛选闲置的车辆</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterTurning:active"}} {{action "setFilterType" "turning"}}>
                      <input type="radio" name="filterTypes"> 流转中<span class = "hidden-xs pull-right text-muted">从本地筛选流转中的车辆</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterRetired:active"}} {{action "setFilterType" "retired"}}>
                      <input type="radio" name="filterTypes"> 退役<span class = "hidden-xs pull-right text-muted">从远程筛选退役的车辆</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div>
              {{#each error in errors.server_side_error}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              <span class="help-block">
                {{helpInfo}}
              </span>
            </div>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#if isLoadingTop}}
              <div class="list-group-item"><span class = "text-muted">Loading...</span></div>
            {{else}}
              {{#each car in arrangedResult itemController="car"}}
              <a class="list-group-item" {{action "goDetail" car.id}} href = "javascript:void(0)">
                {{car.number}}【{{car.testtype.name}}】<span class="hidden-xs">- {{car.vehicletype.name}}</span>
                <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                <span class="pull-right">
                  {{!-- 
                  {{#if car.relInstance.bedstand}}
                    <span class = "hidden-xs">
                      {{car.relInstance.bedstand.name}}
                      {{bedstand_running_state_text car.relInstance.bedstand.running_state}}
                    </span>
                  {{/if}}
                  --}}
                  {{car_status car.status stepName = car.relInstance.lastTrace.step.name}}
                </span>
              </a>
              {{/each}}
            {{/if}}
            {{#if isTopButtonNeeded}}
              <button {{action "toggleToShowAll"}} type="button" class="btn btn-default btn-xs btn-block">
                <span {{bind-attr class=":glyphicon isToShowAll:glyphicon-chevron-up:glyphicon-chevron-down"}}></span>
              </button>
            {{/if}}
            {{#if isMoreButtonNeeded}}
              {{spin-button isIcon=true loadedIcon='glyphicon-chevron-down' isLoading=isLoadingMore disabled=isLoadingMore action="loadMore" class="btn btn-info btn-xs btn-block"}}
            {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="car">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.number.length:has-error"}}>
              <label class="control-label col-md-2" for="number">编号</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "number" type="text" class="form-control" value=number}}
                  {{#if errors.number}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{number}}</p>
                {{/if}}
                {{#each error in errors.number}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="status">流转状态</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">
                  {{car_status status}}</p>
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.testtype.length:has-error"}}>
              <label class="control-label col-md-2" for="testtype">试验类型</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "testtype" class="form-control"
                    content=testtypes
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个试验类型--"
                    selection=selectedTesttype
                  }}
                  {{#if errors.testtype}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{testtype.name}}</p>
                {{/if}}
                {{#each error in errors.testtype}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.vehicletype.length:has-error"}}>
              <label class="control-label col-md-2" for="vehicletype">车型</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "vehicletype" class="form-control"
                    content=vehicletypes
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个车型--"
                    selection=selectedVehicletype
                  }}
                  {{#if errors.vehicletype}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{vehicletype.name}}</p>
                {{/if}}
                {{#each error in errors.vehicletype}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.owner.length:has-error"}}>
              <label class="control-label col-md-2" for="owner">负责人</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "owner" class="form-control"
                    content=owners
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个用户--"
                    selection=selectedOwner
                  }}
                  {{#if errors.owner}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{owner.name}}</p>
                {{/if}}
                {{#unless owners.length}}
                  <div class = "help-block text-danger">检测到没有任何一个车辆负责组有用户，请联系系统管理员。
                  </div>
                {{/unless}}
                {{#each error in errors.owner}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isTurning}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentFlowversion">流程版本</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{relInstance.flowversion.version}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentStep">所处步骤</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">
                    <span class = "pull-left">{{relInstance.lastTrace.step.name}}</span>
                    <a {{action "goMonitorInstance" relInstance}} title="点击跳转到该工作单" class="btn btn-link btn-xs pull-left"><span class="glyphicon glyphicon-link"></span></a>
                  </p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentBedstand">所处台架</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{relInstance.bedstand.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentOrganization">所处组织</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{relInstance.inbox_organization.name}}</p>
              </div>
            </li>
            {{/if}}
            {{#if relInstance.inbox_user}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="relUser">关联用户</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{relInstance.inbox_user.name}}</p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{#if isUnused}}
                  <button {{action "startTurn"}} type="button" class="btn btn-info btn-block" >开始流转</button>
                {{/if}}
                {{#if isTurning}}
                  <button {{action "abortTurn"}} type="button" class="btn btn-info btn-block" >中止流转</button>
                {{/if}}
                {{#if isRetired}}
                  <button {{action "goRestore"}} type="button" class="btn btn-info btn-block" >还原</button>
                {{else}}
                  <button {{action "goRetire"}} type="button" class="btn btn-info btn-block" >退役</button>
                {{/if}}
                {{spin-button isLoading=isSaving disabled=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="start/bedstands">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
            {{#if isNewButtonNeeded}}
              <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
                <span class="glyphicon glyphicon-plus"></span>
              </a>
            {{/if}}
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-12">
                <div class="input-group">
                  {{input type="text" class="form-control input-round input-addin-left input-addin-right" placeholder=searchHelp title=searchHelp value = searchKey}}
                  <span class="input-group-addin addin-round pull-left">
                    <span class="glyphicon glyphicon-search"></span>
                  </span>
                  <a data-toggle="collapse" href="#collapseCarFilter" aria-expanded="false" aria-controls="collapseCarFilter" class="input-group-addin addin-round pull-right">
                    <span class = "hidden-xs">{{car_status filterType}}</span><span {{bind-attr class=":glyphicon isLoadingTop:glyphicon-transfer:glyphicon-filter isFilterAuto::text-warning"}}></span>
                  </a>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="collapse filter-list well well-sm" id="collapseCarFilter" aria-expanded="false">
                  <div class="btn-group btn-group-vertical" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-default isFilterAuto:active"}} {{action "setFilterType" "auto"}}>
                      <input type="radio" name="filterTypes"> 自动<span class = "hidden-xs pull-right text-muted">筛选所有非退役状态的台架</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterUnused:active"}} {{action "setFilterType" "unused"}}>
                      <input type="radio" name="filterTypes"> 闲置<span class = "hidden-xs pull-right text-muted">筛选闲置的台架</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterTurning:active"}} {{action "setFilterType" "turning"}}>
                      <input type="radio" name="filterTypes"> 流转中<span class = "hidden-xs pull-right text-muted">筛选流转中的台架</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-default isFilterRetired:active"}} {{action "setFilterType" "retired"}}>
                      <input type="radio" name="filterTypes"> 退役<span class = "hidden-xs pull-right text-muted">筛选退役的台架</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div>
              <span class="help-block">
                {{helpInfo}}
              </span>
            </div>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each bedstand in arrangedResult itemController="bedstand"}}
            <div {{bind-attr class=":list-group-item isSorting:is-sorting"}} {{action "goDetail" bedstand.id}}>
                {{bedstand.name}}
                <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                <span class="pull-right">{{bedstand_running_state_text bedstand.running_state}}</span>
                <span class="pull-right mr4">{{bedstand_status bedstand.status stepName = bedstand.relInstance.lastTrace.step.name}}</span>
                {{#if isNewButtonNeeded}}
                  <span class="btn-sort btn-sort-up" {{action "sortUp" bedstand.id}}><span class="glyphicon glyphicon-arrow-up"></span></span>
                  <span class="btn-sort btn-sort-down" {{action "sortDown" bedstand.id}}><span class="glyphicon glyphicon-arrow-down"></span></span>
                {{/if}}
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstand">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">
                    <span class = "pull-left">{{name}}</span>
                    <a {{action "goMonitorInstances" name}} title="点击搜索该台架的工作单" class="btn btn-link btn-xs pull-left"><span class="glyphicon glyphicon-search"></span></a>
                  </p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.nickname.length:has-error"}}>
              <label class="control-label col-md-2" for="nickname">德文</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "nickname" type="text" class="form-control" value=nickname}}
                  {{#if errors.nickname}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{nickname}}</p>
                {{/if}}
                {{#each error in errors.nickname}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.organization.length:has-error"}}>
              <label class="control-label col-md-2" for="organization">关联组织</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "organization" class="form-control"
                    content=organizations
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个组织--"
                    selection=selectedOrganization
                  }}
                  {{#if errors.organization}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{organization.name}}</p>
                {{/if}}
                {{#each error in errors.organization}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.tag.length:has-error"}}>
              <label class="control-label col-md-2" for="tag">标签</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{#if isCreatingTag}}
                    <div class="input-group">
                      {{input id = "newTag" type="text" class="form-control" value=newTag placeholder="请输入新标签"}}
                      <div class="input-group-btn">
                        <button type="button" class="btn btn-default" {{action "saveCreatingTag"}}><span class="glyphicon glyphicon-ok"></span></button>
                        <button type="button" class="btn btn-default" {{action "toggleCreatingTag"}}><span class="glyphicon glyphicon-remove"></span></button>
                      </div>
                    </div>
                  {{else}}
                    <div class="btn-group form-control" data-toggle="buttons">
                      {{#each tag in tags itemController = "bedstand_tag_item"}}
                        <label {{bind-attr class=":btn :btn-info :btn-sm tag.isTagActive:active"}} {{action "setTag" tag.value}}>
                          <input type="radio" name="tag" /> {{tag.value}}
                        </label>
                      {{/each}}
                      <label {{bind-attr class=":btn :btn-default :btn-sm"}} {{action "toggleCreatingTag"}}>
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                      </label>
                      {{#if tag}}
                        <label {{bind-attr class=":btn :btn-default :btn-sm"}} {{action "clearTag"}}>
                          <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
                        </label>
                      {{/if}}
                    </div>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{tag}}</p>
                {{/if}}
                {{#each error in errors.tag}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="running_state">运行状态</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand_running_state_text running_state}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="status">流转状态</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">
                  {{bedstand_status status}}</p>
              </div>
            </li>
            {{#if isTurning}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentFlowversion">流程版本</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{relInstance.flowversion.version}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="currentStep">所处步骤</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">
                    <span class = "pull-left">{{relInstance.lastTrace.step.name}}</span>
                    <a {{action "goMonitorInstance" relInstance}} title="点击跳转到该工作单" class="btn btn-link btn-xs pull-left"><span class="glyphicon glyphicon-link"></span></a>
                  </p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{{descriptionHtml}}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{#if isUnused}}
                  <button {{action "startTurn"}} type="button" class="btn btn-info btn-block" >开始流转</button>
                {{/if}}
                {{#if isTurning}}
                  <button {{action "abortTurn"}} type="button" class="btn btn-info btn-block" >中止流转</button>
                {{/if}}
                {{#if isRetired}}
                  <button {{action "goRestore"}} type="button" class="btn btn-info btn-block" >还原</button>
                {{else}}
                  <button {{action "goRetire"}} type="button" class="btn btn-info btn-block" >退役</button>
                {{/if}}
                {{#if controllers.start_bedstands.isNewButtonNeeded}}
                  {{spin-button isLoading=isSaving isFixUserDisableded=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
                {{/if}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="cartrace">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary hidden-print" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
            {{#if arrangedResult.length}}
              <a href = "print.html" target = "_blank" class="pull-right btn-primary btn-sm hidden-print hidden-xs" title = "打印">
                <span class="glyphicon glyphicon-print" aria-hidden="true"></span>
                <span class = "sr-only">打印</span>
              </a>
            {{/if}}
          </div>
          <div class="panel-body hidden-print">
            <div class="row">
              <input class="datepicker hide" type="text"/>
              <div class="col-md-2 col-xs-12">
                <div class="input-group input-group-sm">
                  <a href = "javascript:void(0)" {{action "setStartDate"}} class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                  </a>
                  {{input type="text" class="form-control" value=startDateValue placeholder="开始时间"}}
                </div>
              </div>
              <div class="col-md-2 col-xs-12">
                <div class="input-group input-group-sm">
                  <a href = "javascript:void(0)" {{action "setEndDate"}} class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                  </a>
                  {{input type="text" class="form-control" value=endDateValue placeholder="结束时间"}}
                </div>
              </div>
              {{#if isConfirmingExport}}
                <div class="col-md-8 col-xs-12">
                  <span class = "text-warning mr4">将导出{{totalLength}}条记录，确认要导出吗？</span>
                  {{spin-button isLoading=isExporting disabled=isExporting action="doExport" class="btn btn-info btn-sm" title="导出"}}
                  <button {{action "cancelExport"}} type="button" class="btn btn-info btn-sm">取消</button>
                </div>
              {{else}}
                <div class="col-md-2 col-xs-12">
                  {{spin-button isLoading=isLoading disabled=isUnSearchable action="search" class="btn btn-primary btn-block btn-sm" title="搜索"}}
                </div>
                <div class="col-md-6 col-xs-12">
                  <div class="btn-group ie8inline" data-toggle="buttons">
                    <label title = "表格模式" {{bind-attr class=":btn :btn-info :btn-sm isDisplayTable:active"}} {{action "setDisplayMode" "table"}}>
                      <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                      <input type="radio" name="display_mode" />
                      <span class = "sr-only">表格</span>
                    </label>
                    <label title = "列表模式" {{bind-attr class=":btn :btn-info :btn-sm isDisplayList:active"}} {{action "setDisplayMode" "list"}}>
                      <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                      <input type="radio" name="display_mode" />
                      <span class = "sr-only">列表</span>
                    </label>
                  </div>
                  {{#unless isDisplayList}}
                  <div class="btn-group ie8inline" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm sortAscending:active"}} {{action "setSortAscending" true}}>
                      <span class="glyphicon glyphicon-sort-by-attributes" aria-hidden="true"></span>
                      <input type="radio" name="sort_type" />
                      <span class = "sr-only">升序</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm sortAscending::active"}} {{action "setSortAscending" false}}>
                      <span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"></span>
                      <input type="radio" name="sort_type" />
                      <span class = "sr-only">降序</span>
                    </label>
                  </div>
                  {{/unless}}
                  {{spin-button isLoading=isFetchingCountForExport disabled=isFetchingCountForExport action="export" class="btn btn-info btn-sm" title="导出为EXCEL"}}
                </div>
              {{/if}}
            </div>
          </div>
          <div class="container-fluid">
            <div>
              {{#each error in errors.startDate}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.startDateValue}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.endDateValue}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.server_side_error}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              <span class="help-block">
                {{helpInfo}}
              </span>
            </div>
          </div>
          <div class="container-fluid result-box">
            {{#if isDisplayList}}
              <!-- List group -->
              <div class="list-group">
                {{#if isLoading}}
                  <div class="list-group-item"><span class = "text-muted">Loading...</span></div>
                {{else}}
                  {{#if arrangedResult.length}}
                    <ul class="list-history">
                      {{#each trace in arrangedResult itemController="cartrace_item"}}
                      <li class="list-history-item">
                          <div class = "history-icon">
                            <span {{bind-attr class=":glyphicon trace.is_finished:glyphicon-ok-sign:glyphicon-record trace.is_finished::t5 trace.realTimeoutColor"}}></span>
                          </div>
                          {{#if trace.previous_trace}}
                            {{history_line trace.realTimeoutColor isFinished = trace.is_finished}}
                          {{/if}}
                          <div class="history-title">
                            <span {{bind-attr class="trace.realTimeoutColor"}}>
                              {{trace.step.name}}
                            </span>
                            <span>
                              {{step_type trace.step.type false}}
                            </span>
                          </div>
                          <div class = "history-content text-muted">
                            <span class = "history-organization">{{trace.organization.name}}</span>
                            <span class = "history-handler">{{trace.handler.name}}</span>
                            {{#unless trace.handler}}
                            <span class = "history-user">{{trace.user.name}}</span>
                            {{/unless}}
                            <span class = "history-date pull-right hidden-xs">{{timefmt trace.start_date}}</span>
                            <div class = "history-date visible-xs-block">{{timefmt trace.start_date}}</div>
                          </div>
                          {{#if trace.info}}
                          <div class = "history-info text-muted">
                            <span>{{trace.info}}</span>
                          </div>
                          {{/if}}
                      </li>
                      {{/each}}
                    </ul>
                  {{/if}}
                {{/if}}
                {{#if isEmpty}}
                  <div class="list-group-item"><span class = "text-warning">指定范围内不存在履历</span></div>
                {{/if}}
              </div>
            {{else}}
              {{#if isLoading}}
                <div class="list-group">
                  <div class="list-group-item"><span class = "text-muted">Loading...</span></div>
                </div>
              {{else}}
                {{#if arrangedResult.length}}
                <div class="table-responsive">
                  <table class="table table-history">
                    <thead>
                      <tr>
                        <th class = "col-step-name">步骤</th>
                        <th class = "text-center col-time">开始时间</th>
                        <th class = "text-center col-time">实际完成时间</th>
                        <th class = "text-center col-days">任务期限</th>
                        <th class = "text-center col-time">到期时间</th>
                        <th class = "text-center col-bedstand-name">台架</th>
                        <th class = "text-center col-organization-name">处理组织</th>
                        <th class = "text-center col-handler-name">处理人</th>
                        <th class = "text-center col-info">处理信息</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each trace in arrangedResult itemController="cartrace_item"}}
                      <tr {{bind-attr class="trace.realTimeoutColor"}}>
                        <th>
                          {{trace.step.name}}
                        </th>
                        <td>{{timefmt trace.start_date}}</td>
                        <td>{{timefmt trace.end_date}}</td>
                        <td>{{trace.due_days}}天</td>
                        <td>{{timefmt trace.yellow_due}}</td>
                        <td>
                          {{#if trace.bedstand.name}}
                            {{trace.bedstand.name}}
                          {{/if}}
                        </td>
                        <td>{{trace.organization.name}}</td>
                        <td>{{trace.handler.name}}</td>
                        <td><span class = "trace-info">{{trace.info}}</span></td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
                {{/if}}
              {{/if}}
              {{#if isEmpty}}
                <div class="list-group">
                  <div class="list-group-item"><span class = "text-warning">指定范围内不存在履历</span></div>
                </div>
              {{/if}}
            {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstandtrace">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary hidden-print" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
            {{#if arrangedResult.length}}
              <a href = "print.html" target = "_blank" class="pull-right btn-primary btn-sm hidden-print hidden-xs" title = "打印">
                <span class="glyphicon glyphicon-print" aria-hidden="true"></span>
                <span class = "sr-only">打印</span>
              </a>
            {{/if}}
          </div>
          <div class="panel-body hidden-print">
            <div class="row">
              <input class="datepicker hide" type="text"/>
              <div class="col-md-2 col-xs-12">
                <div class="input-group input-group-sm">
                  <a href = "javascript:void(0)" {{action "setStartDate"}} class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                  </a>
                  {{input type="text" class="form-control" value=startDateValue placeholder="开始时间"}}
                </div>
              </div>
              <div class="col-md-2 col-xs-12">
                <div class="input-group input-group-sm">
                  <a href = "javascript:void(0)" {{action "setEndDate"}} class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                  </a>
                  {{input type="text" class="form-control" value=endDateValue placeholder="结束时间"}}
                </div>
              </div>
              {{#if isConfirmingExport}}
                <div class="col-md-8 col-xs-12">
                  <span class = "text-warning mr4">将导出{{totalLength}}条记录，确认要导出吗？</span>
                  {{spin-button isLoading=isExporting disabled=isExporting action="doExport" class="btn btn-info btn-sm" title="导出"}}
                  <button {{action "cancelExport"}} type="button" class="btn btn-info btn-sm">取消</button>
                </div>
              {{else}}
                <div class="col-md-2 col-xs-12">
                  {{spin-button isLoading=isLoading disabled=isUnSearchable action="search" class="btn btn-primary btn-block btn-sm" title="搜索"}}
                </div>
                <div class="col-md-6 col-xs-12">
                  <div class="btn-group ie8inline" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm isDisplayTable:active"}} {{action "setDisplayMode" "table"}}>
                      <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                      <input type="radio" name="display_mode" />
                      <span class = "sr-only">表格</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm isDisplayList:active"}} {{action "setDisplayMode" "list"}}>
                      <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                      <input type="radio" name="display_mode" />
                      <span class = "sr-only">列表</span>
                    </label>
                  </div>
                  {{#unless isDisplayList}}
                  <div class="btn-group ie8inline" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm sortAscending:active"}} {{action "setSortAscending" true}}>
                      <span class="glyphicon glyphicon-sort-by-attributes" aria-hidden="true"></span>
                      <input type="radio" name="sort_type" />
                      <span class = "sr-only">升序</span>
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm sortAscending::active"}} {{action "setSortAscending" false}}>
                      <span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"></span>
                      <input type="radio" name="sort_type" />
                      <span class = "sr-only">降序</span>
                    </label>
                  </div>
                  {{/unless}}
                  {{spin-button isLoading=isFetchingCountForExport disabled=isFetchingCountForExport action="export" class="btn btn-info btn-sm" title="导出为EXCEL"}}
                </div>
              {{/if}}
            </div>
          </div>
          <div class="container-fluid">
            <div>
              {{#each error in errors.startDate}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.startDateValue}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.endDateValue}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              {{#each error in errors.server_side_error}}
                <div class="help-block text-danger">
                  {{error.message}}
                </div>
              {{/each}}
              <span class="help-block">
                {{helpInfo}}
              </span>
            </div>
          </div>
          <div class="container-fluid result-box">
            {{#if isDisplayList}}
              <!-- List group -->
              <div class="list-group">
                {{#if isLoading}}
                  <div class="list-group-item"><span class = "text-muted">Loading...</span></div>
                {{else}}
                  {{#if arrangedResult.length}}
                    <ul class="list-history">
                      {{#each trace in arrangedResult}}
                      <li class="list-history-item">
                          <div class = "history-icon">
                            <span {{bind-attr class=":glyphicon trace.is_finished:glyphicon-ok-sign:glyphicon-record trace.is_finished::t5 trace.realTimeoutColor"}}></span>
                          </div>
                          {{#if trace.previous_trace}}
                            {{history_line trace.realTimeoutColor isFinished = trace.is_finished}}
                          {{/if}}
                          <div class="history-title">
                            <span {{bind-attr class="trace.realTimeoutColor"}}>
                              {{trace.step.name}}
                            </span>
                            <span>
                              {{step_type trace.step.type false}}
                            </span>
                          </div>
                          <div class = "history-content text-muted">
                            <span class = "history-organization">{{trace.vehicletype.name}}</span>
                            <span class = "history-handler">{{trace.handler.name}}</span>
                            {{#unless trace.handler}}
                            <span class = "history-user">{{trace.user.name}}</span>
                            {{/unless}}
                            <span class = "history-date pull-right hidden-xs">{{timefmt trace.end_date}}</span>
                            <span class="pull-right hidden-xs mr4">-</span>
                            <span class = "history-date pull-right hidden-xs mr4">{{timefmt trace.start_date}}</span>
                            <div class = "history-date visible-xs-block">{{timefmt trace.start_date}}</div>
                            <div class = "history-date visible-xs-block">{{timefmt trace.end_date}}</div>
                          </div>
                          {{#if trace.info}}
                          <div class = "history-info text-muted">
                            <span class = "">{{trace.info}}</span>
                          </div>
                          {{/if}}
                      </li>
                      {{/each}}
                    </ul>
                  {{/if}}
                {{/if}}
                {{#if isEmpty}}
                  <div class="list-group-item"><span class = "text-warning">指定范围内不存在履历</span></div>
                {{/if}}
              </div>
            {{else}}
              {{#if isLoading}}
                <div class="list-group">
                  <div class="list-group-item"><span class = "text-muted">Loading...</span></div>
                </div>
              {{else}}
                {{#if arrangedResult.length}}
                <div class="table-responsive">
                  <table class="table table-history">
                    <thead>
                      <tr>
                        <th class = "col-step-name">步骤</th>
                        <th class = "text-center col-time">开始时间</th>
                        <th class = "text-center col-time">实际完成时间</th>
                        <th class = "text-center col-days">任务期限</th>
                        <th class = "text-center col-time">到期时间</th>
                        <th class = "text-center col-vehicletype-name">车型</th>
                        <th class = "text-center col-organization-name">处理组织</th>
                        <th class = "text-center col-handler-name">处理人</th>
                        <th class = "text-center col-info">处理信息</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each trace in arrangedResult}}
                      <tr {{bind-attr class="trace.realTimeoutColor"}}>
                        <th>{{trace.step.name}}</th>
                        <td>{{timefmt trace.start_date}}</td>
                        <td>{{timefmt trace.end_date}}</td>
                        <td>{{trace.due_days}}天</td>
                        <td>{{timefmt trace.yellow_due}}</td>
                        <td>{{trace.vehicletype.name}}</td>
                        <td>{{trace.organization.name}}</td>
                        <td>{{trace.handler.name}}</td>
                        <td><span class = "trace-info">{{trace.info}}</span></td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </div>
                {{/if}}
              {{/if}}
              {{#if isEmpty}}
                <div class="list-group">
                  <div class="list-group-item"><span class = "text-warning">指定范围内不存在履历</span></div>
                </div>
              {{/if}}
            {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="car/newinstance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.car.length:has-error"}}>
              <label class="control-label col-md-2" for="car_number">车辆编号</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{car.number}}</p>
                {{#if errors.car}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.car}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="car_number">试验类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{car.testtype.name}}</p>
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.bedstand.length:has-error"}}>
              <label class="control-label col-md-2" for="bedstand">台架</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "bedstand" class="form-control"
                  content=bedstands
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  prompt="--请选择一个台架--"
                  selection=selectedBedstand
                }}
                {{#if errors.bedstand}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.bedstand}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback model.errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{textarea id = "description" type="text" rows = "4" class="form-control" value=model.description}}
                {{#if model.errors.description}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in model.errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_step.length:has-error"}}>
              <label class="control-label col-md-2" for="next_step">下一步骤</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_step.name}}<span>{{step_type next_step.type false}}</span></p>
                {{#if errors.next_step}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_step}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_org_type">下一步骤处理组织类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_org_type next_handler_org_type}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_type">下一步骤处理人类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_type next_handler_type}}</p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_organization.length:has-error"}}>
              <label class="control-label col-md-2" for="next_organization">下一步骤组织</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_organization.name}}</p>
                {{#if errors.next_organization}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_organization}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedNextUserSelection}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_user.length:has-error"}}>
              <label class="control-label col-md-2" for="next_user">下一步骤处理人</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "next_user" class="form-control"
                  content=nextUsers
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  prompt="--请选择一个用户--"
                  selection=selectedNextUser
                }}
                {{#if isNextUsersEmpty}}
                <div class = "help-block text-warning">检测到{{next_organization.name}}中还没有任何用户，请联系系统管理员至少添加一个用户。</div>
                {{/if}}
                {{#if errors.next_user}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_user}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_is_handler_locked">下一步骤是否锁定处理人</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean next_step.is_handler_locked}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_yellow_timeout">下一步骤黄色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_yellow_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_red_timeout">下一步骤红色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_red_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_color">下一步骤默认颜色</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{color next_color}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="开始"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstand/newinstance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.bedstand.length:has-error"}}>
              <label class="control-label col-md-2" for="bedstand_name">台架</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand.name}}</p>
                {{#if errors.bedstand}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.bedstand}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="running_state">台架运行状态</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand_running_state_text bedstand.running_state}}</p>
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.vehicletype.length:has-error"}}>
              <label class="control-label col-md-2" for="vehicletype">车型</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "vehicletype" class="form-control"
                  content=vehicletypes
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  prompt="--请选择一个车型--"
                  selection=selectedVehicletype
                }}
                {{#if errors.vehicletype}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.vehicletype}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback model.errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{textarea id = "description" type="text" rows = "4" class="form-control" value=model.description}}
                {{#if model.errors.description}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in model.errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_step.length:has-error"}}>
              <label class="control-label col-md-2" for="next_step">下一步骤</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_step.name}}<span>{{step_type next_step.type false}}</span></p>
                {{#if errors.next_step}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_step}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_org_type">下一步骤处理组织类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_org_type next_handler_org_type}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_handler_type">下一步骤处理人类型</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{step_handler_type next_handler_type}}</p>
              </div>
            </li>
            {{/if}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_organization.length:has-error"}}>
              <label class="control-label col-md-2" for="next_organization">下一步骤组织</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_organization.name}}</p>
                {{#if errors.next_organization}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_organization}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="running_state">下一步骤台架运行状态</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand_running_state_text next_bedstand_running_state isStep = true}}</p>
              </div>
            </li>
            {{#if isNeedNextUserSelection}}
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_user.length:has-error"}}>
              <label class="control-label col-md-2" for="next_user">下一步骤处理人</label>
              <div class="col-md-8 col-sm-12">
                {{view "select" id = "next_user" class="form-control"
                  content=nextUsers
                  optionLabelPath="content.name"
                  optionValuePath="content.id"
                  prompt="--请选择一个用户--"
                  selection=selectedNextUser
                }}
                {{#if isNextUsersEmpty}}
                <div class = "help-block text-warning">检测到{{next_organization.name}}中还没有任何用户，请联系系统管理员至少添加一个用户。</div>
                {{/if}}
                {{#if errors.next_user}}
                  <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                {{/if}}
                {{#each error in errors.next_user}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{/if}}
            {{#if controllers.application.isDeveloper}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_is_handler_locked">下一步骤是否锁定处理人</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean next_step.is_handler_locked}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_yellow_timeout">下一步骤黄色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_yellow_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_red_timeout">下一步骤红色超时时限</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{next_red_timeout}}{{controllers.application.timeoutTag}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="next_color">下一步骤默认颜色</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{color next_color}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="开始"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="car/abortinstance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="car_number">车辆编号</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{instance.car.number}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="中止"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="car/retire">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="help-block">
              {{helpInfo}}
            </div>
            {{#each error in errors.car}}
              <div class="help-block text-danger">
                {{error.message}}
              </div>
            {{/each}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="car_number">车辆编号</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{car.number}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="退役"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="car/restore">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="help-block">
              {{helpInfo}}
            </div>
            {{#each error in errors.car}}
              <div class="help-block text-danger">
                {{error.message}}
              </div>
            {{/each}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="car_number">车辆编号</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{car.number}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="还原"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstand/retire">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="help-block">
              {{helpInfo}}
            </div>
            {{#each error in errors.bedstand}}
              <div class="help-block text-danger">
                {{error.message}}
              </div>
            {{/each}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="bedstand_number">台架名称</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand.name}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="退役"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstand/restore">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="help-block">
              {{helpInfo}}
            </div>
            {{#each error in errors.bedstand}}
              <div class="help-block text-danger">
                {{error.message}}
              </div>
            {{/each}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="bedstand_number">台架名称</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{bedstand.name}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="还原"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstand/abortinstance">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback"}}>
              <label class="control-label col-md-2" for="bedstand_name">台架名称</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{instance.bedstand.name}}</p>
              </div>
            </li>
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}
              {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="中止"}}
              <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="workshops">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each workshop in arrangedResult itemController="workshop"}}
            <a class="list-group-item" {{action "goDetail" workshop.id}} href = "javascript:void(0)">
              {{workshop.number}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="workshop">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.number.length:has-error"}}>
              <label class="control-label col-md-2" for="number">编号</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "number" type="text" class="form-control" value=number}}
                  {{#if errors.number}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{number}}</p>
                {{/if}}
                {{#each error in errors.number}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.organization.length:has-error"}}>
              <label class="control-label col-md-2" for="organization">关联组织</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "organization" class="form-control"
                    content=organizations
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个组织--"
                    selection=selectedOrganization
                  }}
                  {{#if errors.organization}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{organization.name}}</p>
                {{/if}}
                {{#each error in errors.organization}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="vehicletypes">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">车型管理</h3>
            <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
              <span class="glyphicon glyphicon-plus"></span>
            </a>
          </div>
          <div class="panel-body">
            <span class="help-block">
              请选择一个车型。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each vehicletype in arrangedResult itemController="vehicletype"}}
            <a class="list-group-item" {{action "goVehicletype" vehicletype.id}} href = "javascript:void(0)">
              {{vehicletype.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
              <span {{bind-attr class=":pull-right vehicletype.is_enabled:text-success:text-danger"}}>{{boolean vehicletype.is_enabled yes="启用" no="禁用"}}</span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="vehicletype">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{name}}</p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="is_enabled">状态</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <div class="btn-group form-control" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm is_enabled:active"}} {{action "setIsEnabled" true}}>
                      <input type="radio" name="is_enabled" /> 启用
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm is_enabled::active"}} {{action "setIsEnabled" false}}>
                      <input type="radio" name="is_enabled" /> 禁用
                    </label>
                  </div>
                {{else}}
                  <p {{bind-attr class=":form-control-static is_enabled:text-success:text-danger"}}>{{boolean is_enabled yes="启用" no="禁用"}}</p>
                {{/if}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{spin-button isLoading=isSaving disabled=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="testtypes">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">试验类型管理</h3>
            <a {{action "newRecord"}} class = "pull-right btn-sm btn-primary" href = "javascript:void(0)" title = "新建">
              <span class="glyphicon glyphicon-plus"></span>
            </a>
          </div>
          <div class="panel-body">
            <span class="help-block">
              请选择一个试验类型。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each testtype in arrangedResult itemController="testtype"}}
            <a class="list-group-item" {{action "goTesttype" testtype.id}} href = "javascript:void(0)">
              {{testtype.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="testtype">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{name}}</p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.nickname.length:has-error"}}>
              <label class="control-label col-md-2" for="nickname">德文</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "nickname" type="text" class="form-control" value=nickname}}
                  {{#if errors.nickname}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{nickname}}</p>
                {{/if}}
                {{#each error in errors.nickname}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group">
              <label class="control-label col-md-2" for="is_listable">是否用于大屏展示</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  <div class="btn-group form-control" data-toggle="buttons">
                    <label {{bind-attr class=":btn :btn-info :btn-sm is_listable:active"}} {{action "setIsListable" true}}>
                      <input type="radio" name="is_listable" /> 是
                    </label>
                    <label {{bind-attr class=":btn :btn-info :btn-sm is_listable::active"}} {{action "setIsListable" false}}>
                      <input type="radio" name="is_listable" /> 否
                    </label>
                  </div>
                {{else}}
                  <p class="form-control-static">{{boolean is_listable}}</p>
                {{/if}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.organization.length:has-error"}}>
              <label class="control-label col-md-2" for="organization">关联组织</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{view "select" id = "organization" class="form-control"
                    content=organizations
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="--请选择一个组织--"
                    selection=selectedOrganization
                  }}
                  {{#if errors.organization}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{organization.name}}</p>
                {{/if}}
                {{#each error in errors.organization}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{spin-button isLoading=isSaving disabled=isSaving action="deleteRecord" class="btn btn-danger btn-block" title="删除"}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="flows">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">流程管理</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              请选择一个流程。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each flow in arrangedResult itemController="flow"}}
            <a class="list-group-item" {{action "goFlow" flow.id}} href = "javascript:void(0)">
              {{flow.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="flow">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              {{helpInfo}}
            </span>
            {{#if instancesForUpgrade.length}}
            <div class="help-block hide">
              <div class = "text-warning">检测到以下{{instancesForUpgrade.length}}个工作单待升级为最新流程版本：</div>
              {{#each instance in instancesForUpgrade}}
                {{color instance.lastTrace.realTimeoutColor text = instance.car.number}}
              {{/each}}
            </div>
            {{/if}}
          </div>

          <!-- List group -->
          <ul class="list-group form-horizontal">
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
              <label class="control-label col-md-2" for="name">名称</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{input id = "name" type="text" class="form-control" value=name}}
                  {{#if errors.name}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{name}}</p>
                {{/if}}
                {{#each error in errors.name}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="is_bedstand">是否台架流程</label>
              <div class="col-md-8 col-sm-12">
                <p class="form-control-static">{{boolean model.is_bedstand}}</p>
                <div class = "help-block text-muted">
                  台架流程在工作单中需要额外填写台架运行状态、车型、零件名称等信息。
                </div>
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
              <label class="control-label col-md-2" for="description">描述</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
                  {{#if errors.description}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{description}}</p>
                {{/if}}
                {{#each error in errors.description}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.help_text.length:has-error"}}>
              <label class="control-label col-md-2" for="help_text">帮助信息</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "help_text" type="text" rows = "4" class="form-control" value=help_text}}
                  {{#if errors.help_text}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{help_text}}</p>
                {{/if}}
                {{#each error in errors.help_text}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.hint_text.length:has-error"}}>
              <label class="control-label col-md-2" for="hint_text">滚动提示信息</label>
              <div class="col-md-8 col-sm-12">
                {{#if isEditing}}
                  {{textarea id = "hint_text" type="text" rows = "4" class="form-control" value=hint_text}}
                  <div class = "help-block text-muted">
                    可以用\{{}}包裹流程步骤名称来显示指定步骤下工作单数量，用<<流转中>>或<<闲置>>表示流转中或闲置状态的车辆数量，用(())包裹脚本计算公式来表示复合统计结果。
                  </div>
                  <div class = "help-block text-warning">《大试验进度管理流程》默认提示信息为：【{{testtypeDefaultHint}}】
                  </div>
                  <div class = "help-block text-warning">《台架试验管理流程》默认提示信息为：【{{bedstandDefaultHint}}】
                  </div>
                  {{#if errors.hint_text}}
                    <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                  {{/if}}
                {{else}}
                  <p class="form-control-static">{{hint_text}}</p>
                {{/if}}
                {{#each error in errors.hint_text}}
                  <div class="help-block text-danger">
                    {{error.message}}
                  </div>
                {{/each}}
              </div>
            </li>
            {{#if isNeedToShowFix}}
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="creater">创建人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{createrObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="created_date">创建时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt created_date}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modifier">修改人</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{modifierObject.name}}</p>
              </div>
            </li>
            <li class="list-group-item form-group has-feedback">
              <label class="control-label col-md-2" for="modified_date">修改时间</label>
              <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{timefmt modified_date}}</p>
              </div>
            </li>
            {{/if}}
          </ul>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                <button {{action "goFlowversion" current}} type="button" class="btn btn-info btn-block" >流程步骤</button>
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="flowversion">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="help-block">
              {{helpInfo}}
            </div>
            {{#unless is_current}}
            <div class="help-block text-warning">
              该流程版本不是最新版本，如果想修改流程步骤，请返回到流程详情界面再点击流程步骤。
            </div>
            {{/unless}}
          </div>
          <div class = "help-split"></div>
          <div class = "container-fluid">
            <div class = "row">
              <div class="col-md-4 col-sm-12">
                <!-- List group -->
                <div class="list-group">
                {{#each step in model.steps itemController="step"}}
                <a {{bind-attr class=":list-group-item step.isSelected:active"}} {{action "selStep" step.id}} href = "javascript:void(0)">
                  {{step_type step.type false}}
                  {{step.name}}
                  <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                  {{#if step.errors.length}}
                    <span class="glyphicon glyphicon-remove pull-right text-danger"></span>
                  {{/if}}
                </a>
                {{/each}}
                </div>
                {{#if isEditing}}
                {{#if controllers.application.isDevelopMode}}
                <div class = "list-group">
                  <button {{action "addStep"}} type="button" class="btn btn-info btn-block">添加步骤</button>
                </div>
                {{/if}}
                {{/if}}
              </div>
              <div class="col-md-8 col-sm-12">
                {{#if selectedStep}}
                  {{render "selectedStep" selectedStep}}
                  {{#if isEditing}}
                  {{#if controllers.application.isDevelopMode}}
                  <div class = "list-group">
                    <button {{action "deleteStep"}} type="button" class="btn btn-danger btn-block">删除步骤</button>
                  </div>
                  {{/if}}
                  {{/if}}
                {{/if}}
              </div>
            </div>
          </div>
          <div class="panel-footer">
              {{#if errors.messages}}
                {{#each error in errors.server_side_error}}
                <div class="help-block text-center text-danger">
                  {{error.message}}
                </div>
                {{/each}}
              {{/if}}

              {{#if isEditing}}
                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
              {{else}}
                {{#if is_current}}
                  <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{else}}
                  <button {{action "edit"}} type="button" disabled class="btn btn-info btn-block" >修改</button>
                {{/if}}
              {{/if}}
          </div>
        </div>
      </div>
    </div>
    </script>
    </script>
    <script type="text/x-handlebars" data-template-name="selectedStep">
    <!-- List group -->
    <ul class="list-group form-horizontal">
      {{#if controllers.session.user.is_developer}}
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="type">ID</label>
        <div class="col-md-6 col-sm-12">
          <p class="form-control-static">{{id}}</p>
        </div>
      </li>
      {{/if}}
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
        <label class="control-label col-md-4" for="name">名称</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{input id = "name" type="text" class="form-control" value=name}}
            {{#if errors.name}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
          {{else}}
            <p class="form-control-static">{{name}}</p>
          {{/if}}
          {{#each error in errors.name}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.nickname.length:has-error"}}>
        <label class="control-label col-md-4" for="nickname">德文</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{input id = "nickname" type="text" class="form-control" value=nickname}}
            {{#if errors.nickname}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
          {{else}}
            <p class="form-control-static">{{nickname}}</p>
          {{/if}}
          {{#each error in errors.nickname}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="type">类型</label>
        <div class="col-md-6 col-sm-12">
          <p class="form-control-static">{{step_type type true}}</p>
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="next_step_type">流转方式</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isAllStep:active"}} {{action "setNextStepType" "all_step"}}>
                <input type="radio" name="next_step_types" /> 自由流转
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isLastStep:active"}} {{action "setNextStepType" "last_step"}}>
                <input type="radio" name="next_step_types" /> 返回上一步
              </label>
            </div>
            <span class="glyphicon form-control-feedback"></span>
          {{else}}
            <p class="form-control-static">{{step_next_step_type next_step_type}}</p>
          {{/if}}
        </div>
      </li>
      {{#if isNotEndStep}}
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="handler_org_type">处理组织类型</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isFixOrganization:active"}} {{action "setHandlerOrgType" "fix_organization"}}>
                <input type="radio" name="handler_org_type" /> 指定组织
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isRelateTesttype:active"}} {{action "setHandlerOrgType" "relate_testtype"}}>
                <input type="radio" name="handler_org_type" /> 试验类型关联组织
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isRelateBedstand:active"}} {{action "setHandlerOrgType" "relate_bedstand"}}>
                <input type="radio" name="handler_org_type" /> 台架关联组织
              </label>
            </div>
            <span class="glyphicon form-control-feedback"></span>
          {{else}}
            <p class="form-control-static">{{step_handler_org_type handler_org_type}}</p>
          {{/if}}
        </div>
      </li>
      {{#if isFixOrganization}}
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.organization.length:has-error"}}>
        <label class="control-label col-md-4" for="organization">关联组织</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{view "select" id = "organization" class="form-control"
              content=organizations
              optionLabelPath="content.name"
              optionValuePath="content.id"
              prompt="--请选择一个组织--"
              selection=selectedOrganization
            }}
            {{#if errors.organization}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
          {{else}}
            <p class="form-control-static">{{organization.name}}</p>
          {{/if}}
          {{#each error in errors.organization}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      {{/if}}
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="handler_type">处理人类型</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isFixUser:active isFixUserDisabled:disabled"}} {{action "setHandlerType" "fix_user"}}>
                <input type="radio" name="handler_type" /> 指定人员
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isReserveUser:active"}} {{action "setHandlerType" "reserve_user"}}>
                <input type="radio" name="handler_type" /> 处理时预定人员
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isEmptyUser:active"}} {{action "setHandlerType" "empty"}}>
                <input type="radio" name="handler_type" /> 空
              </label>
            </div>
            <span class="glyphicon form-control-feedback"></span>
          {{else}}
            <p class="form-control-static">{{step_handler_type handler_type}}</p>
          {{/if}}
        </div>
      </li>
      {{#if isFixUser}}
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.user.length:has-error"}}>
        <label class="control-label col-md-4" for="user">关联用户</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{view "select" id = "user" class="form-control"
              content=users
              optionLabelPath="content.name"
              optionValuePath="content.id"
              prompt="--请选择一个组织--"
              selection=selectedUser
            }}
            {{#if errors.user}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
            {{#if isUsersEmpty}}
              <div class = "help-block text-warning">检测到{{organization.name}}中还没有任何用户，请联系系统管理员至少添加一个用户。</div>
            {{/if}}
          {{else}}
            <p class="form-control-static">{{user.name}}</p>
          {{/if}}
          {{#each error in errors.user}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      {{/if}}
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.next_step_default.length:has-error"}}>
        <label class="control-label col-md-4" for="next_step_default">默认下一步骤</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isNextStepDefaultStart:active"}} {{action "setNextStepDefault" "start"}}>
                <input type="radio" name="next_step_default" /> 开始
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isNextStepDefaultEnd:active"}} {{action "setNextStepDefault" "end"}}>
                <input type="radio" name="next_step_default" /> 结束
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isNextStepDefaultNone:active"}} {{action "setNextStepDefault" "none"}}>
                <input type="radio" name="next_step_default" /> 无
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{next_step_default_text next_step_default}}</p>
          {{/if}}
          {{#each error in errors.next_step_default}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.is_endable.length:has-error"}}>
        <label class="control-label col-md-4" for="is_endable">可流转到结束步骤</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm is_endable:active"}} {{action "setIsEndable" true}}>
                <input type="radio" name="is_endable" /> 可以
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm is_endable::active"}} {{action "setIsEndable" false}}>
                <input type="radio" name="is_endable" /> 不可以
              </label>
            </div>
          {{else}}
            <p class="form-control-static">
              {{#if is_endable}}
                可以
              {{else}}
                不可以
              {{/if}}
            </p>
          {{/if}}
          {{#each error in errors.is_endable}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="is_handler_locked">是否锁定处理人</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm is_handler_locked:active"}} {{action "setIsHandlerLocked" true}}>
                <input type="radio" name="is_handler_locked" /> 是
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm is_handler_locked::active"}} {{action "setIsHandlerLocked" false}}>
                <input type="radio" name="is_handler_locked" /> 否
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{boolean is_handler_locked}}</p>
          {{/if}}
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="is_listable">是否用于大屏展示</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm is_listable:active"}} {{action "setIsListable" true}}>
                <input type="radio" name="is_listable" /> 是
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm is_listable::active"}} {{action "setIsListable" false}}>
                <input type="radio" name="is_listable" /> 否
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{boolean is_listable}}</p>
          {{/if}}
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="is_bedstand_info_needed">是否需要台架备注</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm is_bedstand_info_needed:active"}} {{action "setIsBedstandInfoNeeded" true}}>
                <input type="radio" name="is_bedstand_info_needed" /> 是
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm is_bedstand_info_needed::active"}} {{action "setIsBedstandInfoNeeded" false}}>
                <input type="radio" name="is_bedstand_info_needed" /> 否
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{boolean is_bedstand_info_needed}}</p>
          {{/if}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.yellow_timeout.length:has-error"}}>
        <label class="control-label col-md-4" for="yellow_timeout">黄色超时时限</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="input-group">
              {{input id = "yellow_timeout" type="text" class="form-control pull-left" value=yellow_timeout}}
              <span class = "input-group-addon">{{controllers.application.timeoutTag}}</span>
              {{#if errors.yellow_timeout}}
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
              {{/if}}
            </div>
          {{else}}
            <p class="form-control-static">
              {{yellow_timeout}}
              {{controllers.application.timeoutTag}}
            </p>
          {{/if}}
          {{#each error in errors.yellow_timeout}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.red_timeout.length:has-error"}}>
        <label class="control-label col-md-4" for="red_timeout">红色超时时限</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="input-group">
              {{input id = "red_timeout" type="text" class="form-control pull-left" value=red_timeout}}
              <span class = "input-group-addon">{{controllers.application.timeoutTag}}</span>
              {{#if errors.red_timeout}}
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
              {{/if}}
            </div>
          {{else}}
            <p class="form-control-static">
              {{red_timeout}}
              {{controllers.application.timeoutTag}}
            </p>
          {{/if}}
          {{#each error in errors.red_timeout}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li class="list-group-item form-group">
        <label class="control-label col-md-4" for="color">默认颜色</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isGray:active"}} {{action "setColor" "gray"}}>
                <input type="radio" name="colors" /> 灰色
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isGreen:active"}} {{action "setColor" "green"}}>
                <input type="radio" name="colors" /> 绿色
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isYellow:active"}} {{action "setColor" "yellow"}}>
                <input type="radio" name="colors" /> 黄色
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isRed:active"}} {{action "setColor" "red"}}>
                <input type="radio" name="colors" /> 红色
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{color color}}</p>
          {{/if}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.default_info.length:has-error"}}>
        <label class="control-label col-md-4" for="default_info">默认处理信息</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{textarea id = "default_info" type="text" rows = "4" class="form-control" value=default_info}}
            {{#if errors.default_info}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
          {{else}}
            <p class="form-control-static">{{default_info}}</p>
          {{/if}}
          {{#each error in errors.default_info}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.form_power.length:has-error"}}>
        <label class="control-label col-md-4" for="form_power">初始表单权限</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isFormEditable:active"}} {{action "setFormPower" "editable"}}>
                <input type="radio" name="form_power" /> 可编辑
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isFormReadonly:active"}} {{action "setFormPower" "readonly"}}>
                <input type="radio" name="form_power" /> 只读
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isFormNone:active"}} {{action "setFormPower" "none"}}>
                <input type="radio" name="form_power" /> 无
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{form_power_text form_power}}</p>
          {{/if}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.bedstand_running_state.length:has-error"}}>
        <label class="control-label col-md-4" for="bedstand_running_state">台架运行状态</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            <div class="btn-group form-control" data-toggle="buttons">
              <label {{bind-attr class=":btn :btn-info :btn-sm isBedstandWaiting:active"}} {{action "setBedstandRunningState" "waiting"}}>
                <input type="radio" name="bedstand_running_state" /> 待样
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isBedstandRunning:active"}} {{action "setBedstandRunningState" "running"}}>
                <input type="radio" name="bedstand_running_state" /> 运行
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isBedstandRepairing:active"}} {{action "setBedstandRunningState" "repairing"}}>
                <input type="radio" name="bedstand_running_state" /> 检修
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isBedstandRating:active"}} {{action "setBedstandRunningState" "rating"}}>
                <input type="radio" name="bedstand_running_state" /> 标定
              </label>
              <label {{bind-attr class=":btn :btn-info :btn-sm isBedstandUpkeeping:active"}} {{action "setBedstandRunningState" "upkeeping"}}>
                <input type="radio" name="bedstand_running_state" /> 保养
              </label>
            </div>
          {{else}}
            <p class="form-control-static">{{bedstand_running_state_text bedstand_running_state}}</p>
          {{/if}}
        </div>
      </li>
      {{/if}}
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.description.length:has-error"}}>
        <label class="control-label col-md-4" for="description">描述</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{textarea id = "description" type="text" rows = "4" class="form-control" value=description}}
            {{#if errors.description}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
            <div class="help-block">
              当用户在工作台中选择该步骤为下一步骤时，将显示该描述，以提示用户该步骤的作用。
            </div>
          {{else}}
            <p class="form-control-static">{{description}}</p>
          {{/if}}
          {{#each error in errors.description}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
      <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.help_text.length:has-error"}}>
        <label class="control-label col-md-4" for="help_text">帮助信息</label>
        <div class="col-md-6 col-sm-12">
          {{#if controllers.flowversion.isEditing}}
            {{textarea id = "help_text" type="text" rows = "4" class="form-control" value=help_text}}
            {{#if errors.help_text}}
              <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            {{/if}}
            <div class="help-block">
              如果车辆流转到该步骤，在工作台中将显示该帮助信息，以提示用户操作。
            </div>
          {{else}}
            <p class="form-control-static">{{help_text}}</p>
          {{/if}}
          {{#each error in errors.help_text}}
            <div class="help-block text-danger">
              {{error.message}}
            </div>
          {{/each}}
        </div>
      </li>
    </ul>
    </script>
    <script type="text/x-handlebars" data-template-name="exhibitions">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)" title = "返回">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">展示台管理</h3>
          </div>
          <div class="panel-body">
            <span class="help-block">
              敬请期待。。。
            </span>
          </div>
          <!-- List group -->
          <div class="list-group">
            {{#each exhibition in arrangedResult itemController="exhibition"}}
            <a class="list-group-item" href = "javascript:void(0)">
              {{exhibition.name}}
              <span class="glyphicon glyphicon-chevron-right pull-right"></span>
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="exhibition">
    </script>
    <script type="text/x-handlebars" data-template-name="about">
    <div class="" id="about">about</div>
    </script>
    <script type="text/x-handlebars" data-template-name="contact">
    <div class="navigable-container" id="contact">
      <div class="container">
        <div class="row">
          <div class="jumbotron">
            <div class="col-md-7 col-sm-12 hidden-xs hidden-sm app-title-box">
              {{partial "_appinfo"}}
            </div>
            <div class="col-md-5 col-sm-12">
              <div class="well">
                <div class = "author-content">
                  <div class = "author-logo">M&T HORIZON</div>
                  <div class = "author-tip">innovate & Balance</div>
                  <div class = "author-name">上海好耐电子科技有限公司</div>
                  <div class = "author-detail">
                    上海市九新公路90弄3号楼九新商务大厦1102室<br/>
                    邮编：201615<br/>
                    电话：021-37693692/37693676<br/>
                    传真：021-37693676 <br/>
                    网址：www.mthorizon.com
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="exhibitionshow">
    <div {{bind-attr class=":navigable-container is_fluid"}} id="exhibitionshow">
      <a {{action "goBack"}} class = "btn-close btn-xs btn-primary collapse" href = "javascript:void(0)" title = "返回">
        <span class="glyphicon glyphicon-remove"></span>
      </a>
      <div class="panel panel-primary full-screen">
        <!-- Default panel contents -->
        <div class="panel-body full-screen">
          <div class="row">
            {{#each area in areas itemController="exhibitionshow_area_item"}}
            <div {{bind-attr class=":col-xs-12 area.colMdClass area.rowMdClass :exhibitionshow-area-item-wrap isNeedToSplit:split-target"}}>
              <div {{bind-attr class=":exhibitionshow-area-item :panel :panel-default area.isHasChild"}}>
                <div {{bind-attr class=":exhibitionshow-area-item-title" title=area.description}}>
                  <span>{{area.title}}</span>
                  <span class = "badge pull-right">{{area.instances.length}} cars</span>
                </div>
                <div {{bind-attr class=":exhibitionshow-area-item-content area.isHasChild:full-screen"}}>
                {{#if area.isHasChild}}
                  <div class="row">
                  {{#each child in area.children itemController="exhibitionshow-child-item"}}
                    <div {{bind-attr class=":col-xs-12 child.colMdClass :exhibitionshow-child-item-wrap"}}>
                      <div class="exhibitionshow-child-item panel panel-default">
                        <div {{bind-attr class=":exhibitionshow-child-item-title" title=child.description}}>
                          {{child.title}}
                        </div>
                        <div class="exhibitionshow-child-item-content">
                          {{#each childInstance in child.instances}}
                            {{color childInstance.lastTrace.realTimeoutColor text = childInstance.car.number}}
                          {{/each}}
                        </div>
                      </div>
                    </div>
                  {{/each}}
                  </div>
                {{else}}
                  {{#each areaInstance in area.instances}}
                    {{color areaInstance.lastTrace.realTimeoutColor text = areaInstance.car.number tip = areaInstance.userName}}
                  {{/each}}
                {{/if}}
                </div>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="testtypestable">
    <div class="table-responsive reports-box testtypestable-box">
      <table class="table table-bordered table2excel table-fixed" cellspacing="0" cellpadding="0">
        <thead>
          <tr>
            <th class = "testtypestable-first-th">
              <img src="images/logo_SVW.jpg" alt="上海大众汽车">
            </th>
            {{#each step in steps}}
              <th><div>{{step.name}}</div><div>{{step.nickname}}</div></th>
            {{/each}}
          </tr>
        </thead>
        <tbody>
          {{#each testtype in testtypes itemController="testtypestable_testtype_item"}}
            <tr>
              <th><div>{{testtype.name}}</div><div>{{testtype.nickname}}</div></th>
              {{#each step in steps itemController="testtypestable_testtype_step_item"}}
                <td {{bind-attr title=step.title}}>
                  <div class = "instance-list-box">
                    {{#each instance in step.instances itemController="testtypestable_testtype_step_instance_item"}}
                      <div {{action "goInstance" instance.id}} {{bind-attr class=":instance-item-box :info-box" title="instance.lastTrace.titleTag"}}>
                        <div class="info-box-content">
                          <div class="info-box-number ws">{{instance.title}}</div>
                          <div class="progress">
                            <div {{bind-attr class=":progress-bar instance.lastTrace.percentageClass instance.lastTrace.realTimeoutBgColor"}}></div>
                            <div class="progress-description">{{instance.lastTrace.timeStatus}}</div>
                          </div>
                        </div>
                      </div>
                    {{/each}}
                  </div>
                </td>
              {{/each}}
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    <div class="testtypestable-hint">
      <marquee direction="right"><span class="glyphicon glyphicon-info-sign"></span><span class = "ml4">{{hint}}</span></marquee>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="bedstandstable">
    <div class="table-responsive reports-box bedstandstable-box">
      <table class="table table-bordered table2excel table-fixed" cellspacing="0" cellpadding="0">
        <thead>
          <tr>
            <th class = "bedstandstable-th-1">
              <div>设备名称</div>
              <div>Pruefstand</div>
            </th>
            <th class = "bedstandstable-th-2">
              <div>台架状态</div>
              <div>Zustand</div>
            </th>
            <th class = "bedstandstable-th-3">
              <div>进度状态</div>
              <div>Prozess</div>
            </th>
            <th class = "bedstandstable-th-4">
              <div>备注</div>
              <div>Bemerkung</div>
            </th>
          </tr>
        </thead>
        <tbody>
          {{#each bedstand in bedstands itemController="bedstandstable_item"}}
            <tr>
              <th><div>{{bedstand.name}}</div><div>{{bedstand.nickname}}</div></th>
              <td {{bind-attr class="bedstand.runningStateBgColor"}}>
                <div>{{bedstand_running_state_text bedstand.running_state isTable=true}}</div>
              </td>
              <td>
                <div class = "instance-list-box">
                  {{#if bedstand.isRunning}}
                    {{#each instance in bedstand.instances}}
                      <div {{action "goInstance" instance.id}} {{bind-attr class=":instance-item-box :info-box" title="instance.lastTrace.titleTag"}}>
                        <div class="info-box-content">
                          <div class="progress">
                            <div {{bind-attr class=":progress-bar instance.lastTrace.percentageClass instance.lastTrace.realTimeoutBgColor"}}></div>
                            <div class="progress-description">{{instance.lastTrace.timeStatus}}</div>
                          </div>
                        </div>
                      </div>
                    {{/each}}
                  {{/if}}
                  <div class = "clear-both"></div>
                </div>
              </td>
              <td>
                <div>
                  {{{bedstand.descriptionHtml}}}
                </div>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    <div class="bedstandstable-tags">
      <div class="btn-group" data-toggle="buttons" style="min-width:300px;">
        {{#each tagitem in tags itemController = "bedstand_tag_item"}}
          <label {{bind-attr class=":btn :btn-info :btn-xs tagitem.isTagActive:active"}} {{action "setTag" tagitem.value}}>
            <input type="radio" name="tag" /> {{tagitem.value}}
          </label>
        {{/each}}
        {{#if tag}}
          <label {{bind-attr class=":btn :btn-default :btn-xs"}} {{action "clearTag"}}>
            <span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
          </label>
        {{/if}}
      </div>
    </div>
    <div class="bedstandstable-hint">
      <marquee direction="right"><span class="glyphicon glyphicon-info-sign"></span><span class = "ml4">{{hint}}</span></marquee>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="account">
    <div class="account-index navigable-pane">
      <div class="container">
        <div class="well">
          <div class="panel panel-primary">
            <!-- Default panel contents -->
            <div class="panel-heading text-center">
              <h3 class="panel-title">账户设置</h3>
            </div>
            <div class="panel-body">
              <div class="list-group">
                <a class="list-group-item" {{action "goAccountinfo"}} href = "javascript:void(0)">
                  账户信息
                  <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                </a>
                <a class="list-group-item" {{action "goAccountpwd"}} href = "javascript:void(0)">
                  修改密码
                  <span class="glyphicon glyphicon-chevron-right pull-right"></span>
                </a>
              </div>
              <div>
                <button type="button" {{action "logout"}} class="btn btn-danger btn-block">退出系统</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{outlet}}
    {{outlet "accountinfo"}}
    {{outlet "accountpwd"}}
    </script>
    <script type="text/x-handlebars" data-template-name="account/accountinfo">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <!-- List group -->
            <ul class="list-group form-horizontal">
              <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.name.length:has-error"}}>
                <label class="control-label col-md-2" for="name">姓名</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isEditing}}
                    {{input id = "name" type="text" class="form-control" value=name placeholder = "请输入真实姓名"}}
                    {{#if errors.name}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                  {{else}}
                    <p class="form-control-static">{{name}}</p>
                  {{/if}}
                  {{#each error in errors.name}}
                    <div class="help-block text-danger">
                      {{error.message}}
                    </div>
                  {{/each}}
                </div>
              </li>
              <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.phone.length:has-error"}}>
                <label class="control-label col-md-2" for="phone">手机号</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isEditing}}
                    {{input id = "phone" type="text" class="form-control" value=phone placeholder = "请输入手机号码"}}
                    {{#if errors.phone}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                  {{else}}
                    <p class="form-control-static">{{phone}}</p>
                  {{/if}}
                  {{#each error in errors.phone}}
                    <div class="help-block text-danger">
                      {{error.message}}
                    </div>
                  {{/each}}
                </div>
              </li>
              <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.email.length:has-error"}}>
                <label class="control-label col-md-2" for="email">邮箱</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isEditing}}
                    {{input id = "email" type="text" class="form-control" value=email placeholder = "请输入邮箱"}}
                    {{#if errors.email}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                  {{else}}
                    <p class="form-control-static">{{email}}</p>
                  {{/if}}
                  {{#each error in errors.email}}
                    <div class="help-block text-danger">
                      {{error.message}}
                    </div>
                  {{/each}}
                </div>
              </li>
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="role">所属角色</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{role.name}}</p>
                </div>
              </li>
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="organization">所属组织</label>
                <div class="col-md-8 col-sm-12">
                  <p class="form-control-static">{{organization.name}}</p>
                </div>
              </li>
              <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.signature.length:has-error"}}>
                <label class="control-label col-md-2" for="signature">个性签名</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isEditing}}
                    {{textarea id = "signature" type="text" rows = "4" class="form-control" value=signature placeholder = "请输入个性签名"}}
                    {{#if errors.signature}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                  {{else}}
                    <p class="form-control-static">{{signature}}</p>
                  {{/if}}
                  {{#each error in errors.signature}}
                    <div class="help-block text-danger">
                      {{error.message}}
                    </div>
                  {{/each}}
                </div>
              </li>
              <li class="list-group-item form-group has-feedback">
                <label class="control-label col-md-2" for="is_developer">开发者模式</label>
                <div class="col-md-8 col-sm-12">
                  {{#if isEditing}}
                    <div class="btn-group form-control" data-toggle="buttons">
                      <label {{bind-attr class=":btn :btn-info :btn-sm is_developer:active"}} {{action "setIsDeveloper" true}}>
                        <input type="radio" name="is_developer" /> 是
                      </label>
                      <label {{bind-attr class=":btn :btn-info :btn-sm is_developer::active"}} {{action "setIsDeveloper" false}}>
                        <input type="radio" name="is_developer" /> 否
                      </label>
                    </div>
                  {{else}}
                    <p class="form-control-static">{{boolean is_developer}}</p>
                  {{/if}}
                </div>
              </li>
            </ul>
            <div>
                {{#if errors.messages}}
                  {{#each error in errors.server_side_error}}
                  <div class="help-block text-center text-danger">
                    {{error.message}}
                  </div>
                  {{/each}}
                {{/if}}

                {{#if isEditing}}
                  {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-primary btn-block" title="保存"}}
                  <button {{action "cancel"}} type="button" class="btn btn-info btn-block">取消</button>
                {{else}}
                  <button {{action "edit"}} type="button" class="btn btn-info btn-block" >修改</button>
                {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
    </script>
    <script type="text/x-handlebars" data-template-name="account/accountpwd">
    <div class="container">
      <div class="well">
        <div class="panel panel-primary">
          <!-- Default panel contents -->
          <div class="panel-heading text-center">
            <a {{action "goBack"}} class = "pull-left btn-sm btn-primary" href = "javascript:void(0)">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <h3 class="panel-title">{{pannelTitle}}</h3>
          </div>
          <div class="panel-body">
            <div class="list-group form-horizontal">
              <!-- List group -->
              <ul class="list-group form-horizontal">
                <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.old_password.length:has-error"}}>
                  <label class="control-label sr-only" for="old_password">旧密码</label>
                  <div class="col-md-12">
                    {{input id = "old_password" type="password" class="form-control" value=old_password placeholder = "请输入旧密码"}}
                    {{#if errors.old_password}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                    {{#each error in errors.old_password}}
                      <div class="help-block text-danger">
                        {{error.message}}
                      </div>
                    {{/each}}
                  </div>
                </li>
                <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.new_password.length:has-error"}}>
                  <label class="control-label sr-only" for="new_password">新密码</label>
                  <div class="col-md-12">
                    {{input id = "new_password" type="password" class="form-control" value=new_password placeholder = "请输入新密码"}}
                    {{#if errors.new_password}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                    {{#each error in errors.new_password}}
                      <div class="help-block text-danger">
                        {{error.message}}
                      </div>
                    {{/each}}
                  </div>
                </li>
                <li {{bind-attr class=":list-group-item :form-group :has-feedback errors.confirm_password.length:has-error"}}>
                  <label class="control-label sr-only" for="confirm_password">确认密码</label>
                  <div class="col-md-12">
                    {{input id = "confirm_password" type="password" class="form-control" value=confirm_password placeholder = "请再次输入新密码"}}
                    {{#if errors.confirm_password}}
                      <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {{/if}}
                    {{#each error in errors.confirm_password}}
                      <div class="help-block text-danger">
                        {{error.message}}
                      </div>
                    {{/each}}
                  </div>
                </li>
              </ul>
              <div>
                {{#if errors.messages}}
                  {{#each error in errors.server_side_error}}
                  <div class="help-block text-center text-danger">
                    {{error.message}}
                  </div>
                  {{/each}}
                {{/if}}

                {{spin-button isLoading=isSaving disabled=isUnSavable action="save" class="btn btn-info btn-block" title="保存"}}
              </div>
            </div>
        </div>
      </div>
    </div>
    </script>

    <div id = "datapicker-container"></div>

    <script src="libs/jquery/jquery.min.js?v=1.01"></script>
    <script src="libs/jquery/jquery.placeholder.js?v=1.01"></script>
    <script src="libs/jquery/jquery.autoscroll.js?v=1.01"></script>
    <script src="libs/bootstrap/js/bootstrap.min.js?v=1.01"></script>
    <script src="libs/pickadate/picker.js?v=1.01"></script>
    <script src="libs/pickadate/picker.date.js?v=1.01"></script>
    <script src="libs/pickadate/picker.time.js?v=1.01"></script>
    <script src="libs/pickadate/translations/zh_CN.js?v=1.01"></script>
    <script src="libs/pickadate/legacy.js?v=1.01"></script>
    <script src="js/base/ho.js?v=1.01"></script>
    <script src="js/base/bootstrap-navigable.js?v=1.01"></script>
    <script src="libs/ember/handlebars-v2.0.0.js?v=1.01"></script>
    <script src="libs/ember/ember-1.9.1.js?v=1.01"></script>
    <script src="libs/ember/ember-data.min.js?v=1.01"></script>
    <script src="js/base/views.js?v=1.01"></script>
    <script src="js/base/ember_extend.js?v=1.01"></script>
    <script src="js/base/app.js?v=1.01"></script>

    <script src="js/app/login.js?v=1.01"></script>
    <script src="js/app/session.js?v=1.01"></script>
    <script src="js/app/start.js?v=1.01"></script>
    <script src="js/app/user.js?v=1.01"></script>
    <script src="js/app/resetpwd.js?v=1.01"></script>
    <script src="js/app/setting.js?v=1.01"></script>
    <script src="js/app/role.js?v=1.01"></script>
    <script src="js/app/organization.js?v=1.01"></script>
    <script src="js/app/car.js?v=1.01"></script>
    <script src="js/app/cars_from_instances.js?v=1.01"></script>
    <script src="js/app/newinstance.js?v=1.01"></script>
    <script src="js/app/abortinstance.js?v=1.01"></script>
    <script src="js/app/retire.js?v=1.01"></script>
    <script src="js/app/restore.js?v=1.01"></script>
    <script src="js/app/workshop.js?v=1.01"></script>
    <script src="js/app/testtype.js?v=1.01"></script>
    <script src="js/app/vehicletype.js?v=1.01"></script>
    <script src="js/app/bedstand_sort.js?v=1.01"></script>
    <script src="js/app/bedstand.js?v=1.01"></script>
    <script src="js/app/flow.js?v=1.01"></script>
    <script src="js/app/flowversion.js?v=1.01"></script>
    <script src="js/app/step.js?v=1.01"></script>
    <script src="js/app/flow_step_name.js?v=1.01"></script>
    <script src="js/app/exhibition.js?v=1.01"></script>
    <script src="js/app/screenarea.js?v=1.01"></script>
    <script src="js/app/instance.js?v=1.01"></script>
    <script src="js/app/newinstance_from_instances.js?v=1.01"></script>
    <script src="js/app/export.js?v=1.01"></script>
    <script src="js/app/trace.js?v=1.01"></script>
    <script src="js/app/inbox_instance.js?v=1.01"></script>
    <script src="js/app/upgrade_instance.js?v=1.01"></script>
    <script src="js/app/testtypestable.js?v=1.01"></script>
    <script src="js/app/bedstandstable.js?v=1.01"></script>
    <script src="js/app/account.js?v=1.01"></script>
    <script src="js/app/accountinfo.js?v=1.01"></script>
    <script src="js/app/accountpwd.js?v=1.01"></script>
    <script src="js/app/contact.js?v=1.01"></script>
    <script src="js/app/startup.js?v=1.01"></script>
    <script src="js/app/changeset.js?v=1.01"></script>
    <script src="js/app/timeout.js?v=1.01"></script>
    <script src="js/app/cartrace.js?v=1.01"></script>
    <script src="js/app/workshoptrace.js?v=1.01"></script>
    <script src="js/app/bedstandtrace.js?v=1.01"></script>


    <!--

    <script src="dist/hsc.min.js?v=0.2.25"></script>

    -->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="libs/bootstrap/hacks/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
